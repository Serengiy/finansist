var xe=Object.defineProperty;var ge=(s,a,e)=>a in s?xe(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var o=(s,a,e)=>(ge(s,typeof a!="symbol"?a+"":a,e),e);import{u as ve,i as Te,r as k,j as De,k as ke,o as Me,c as _e,w as le,l as qe,P as ue,m as V,N as W,a as T,b as C,e as re,f as J,t as Oe,d as Pe}from"./app-bb05d17f.js";import{Q as B}from"./QSelect-b751e38e.js";import{Q as Ie}from"./QForm-659b3c99.js";import{Q as Ye}from"./QPage-6a0c327f.js";import{_ as Ee}from"./OperationTable-57886f29.js";import{t as _,g as se,c as E,m as He,a as Qe,b as Ne,d as Le,s as S,e as we,f as Ce,h as ze,i as fe,j as Re,l as ce,k as Fe,w as de,n as Ve,o as H}from"./format-04e7afb3.js";import{a as ye,s as We,b as Be}from"./startOfQuarter-72f9bb24.js";import"./QTable-7360ed10.js";import"./QPagination-06fc6825.js";function Ae(s,a){const e=_(s,a==null?void 0:a.in),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function Ge(s,a){const e=_(s,a==null?void 0:a.in);return e.setDate(1),e.setHours(0,0,0,0),e}function Xe(s,a){var y,x,g,v;const e=se(),t=(a==null?void 0:a.weekStartsOn)??((x=(y=a==null?void 0:a.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??e.weekStartsOn??((v=(g=e.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??0,r=_(s,a==null?void 0:a.in),n=r.getDay(),u=(n<t?-7:0)+6-(n-t);return r.setDate(r.getDate()+u),r.setHours(23,59,59,999),r}function Ue(s,a){const e=_(s,a==null?void 0:a.in),t=e.getMonth(),r=t-t%3+3;return e.setMonth(r,0),e.setHours(23,59,59,999),e}function Ze(){return Object.assign({},se())}function $e(s,a){const e=_(s,a==null?void 0:a.in).getDay();return e===0?7:e}function je(s,a){const e=Ke(a)?new a(0):E(a,0);return e.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),e.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e}function Ke(s){var a;return typeof s=="function"&&((a=s.prototype)==null?void 0:a.constructor)===s}const Je=10;class me{constructor(){o(this,"subPriority",0)}validate(a,e){return!0}}class Se extends me{constructor(a,e,t,r,n){super(),this.value=a,this.validateValue=e,this.setValue=t,this.priority=r,n&&(this.subPriority=n)}validate(a,e){return this.validateValue(a,this.value,e)}set(a,e,t){return this.setValue(a,e,this.value,t)}}class et extends me{constructor(e,t){super();o(this,"priority",Je);o(this,"subPriority",-1);this.context=e||(r=>E(t,r))}set(e,t){return t.timestampIsSet?e:E(e,je(e,this.context))}}class f{run(a,e,t,r){const n=this.parse(a,e,t,r);return n?{setter:new Se(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(a,e,t){return!0}}class tt extends f{constructor(){super(...arguments);o(this,"priority",140);o(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}const b={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},O={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function p(s,a){return s&&{value:a(s.value),rest:s.rest}}function m(s,a){const e=a.match(s);return e?{value:parseInt(e[0],10),rest:a.slice(e[0].length)}:null}function P(s,a){const e=a.match(s);if(!e)return null;if(e[0]==="Z")return{value:0,rest:a.slice(1)};const t=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,n=e[3]?parseInt(e[3],10):0,u=e[5]?parseInt(e[5],10):0;return{value:t*(r*He+n*Qe+u*Ne),rest:a.slice(e[0].length)}}function he(s){return m(b.anyDigitsSigned,s)}function h(s,a){switch(s){case 1:return m(b.singleDigit,a);case 2:return m(b.twoDigits,a);case 3:return m(b.threeDigits,a);case 4:return m(b.fourDigits,a);default:return m(new RegExp("^\\d{1,"+s+"}"),a)}}function ee(s,a){switch(s){case 1:return m(b.singleDigitSigned,a);case 2:return m(b.twoDigitsSigned,a);case 3:return m(b.threeDigitsSigned,a);case 4:return m(b.fourDigitsSigned,a);default:return m(new RegExp("^-?\\d{1,"+s+"}"),a)}}function ne(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function be(s,a){const e=a>0,t=e?a:1-a;let r;if(t<=50)r=s||100;else{const n=t+50,u=Math.trunc(n/100)*100,y=s>=n%100;r=s+u-(y?100:0)}return e?r:1-r}function pe(s){return s%400===0||s%4===0&&s%100!==0}class rt extends f{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,r){const n=u=>({year:u,isTwoDigitYear:t==="yy"});switch(t){case"y":return p(h(4,e),n);case"yo":return p(r.ordinalNumber(e,{unit:"year"}),n);default:return p(h(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const n=e.getFullYear();if(r.isTwoDigitYear){const y=be(r.year,n);return e.setFullYear(y,0,1),e.setHours(0,0,0,0),e}const u=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(u,0,1),e.setHours(0,0,0,0),e}}class at extends f{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,r){const n=u=>({year:u,isTwoDigitYear:t==="YY"});switch(t){case"Y":return p(h(4,e),n);case"Yo":return p(r.ordinalNumber(e,{unit:"year"}),n);default:return p(h(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){const u=Le(e,n);if(r.isTwoDigitYear){const x=be(r.year,u);return e.setFullYear(x,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),S(e,n)}const y=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(y,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),S(e,n)}}class st extends f{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return ee(t==="R"?4:t.length,e)}set(e,t,r){const n=E(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),we(n)}}class nt extends f{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return ee(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}class ot extends f{constructor(){super(...arguments);o(this,"priority",120);o(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"Q":case"QQ":return h(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class it extends f{constructor(){super(...arguments);o(this,"priority",120);o(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"q":case"qq":return h(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class lt extends f{constructor(){super(...arguments);o(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);o(this,"priority",110)}parse(e,t,r){const n=u=>u-1;switch(t){case"M":return p(m(b.month,e),n);case"MM":return p(h(2,e),n);case"Mo":return p(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class ut extends f{constructor(){super(...arguments);o(this,"priority",110);o(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,r){const n=u=>u-1;switch(t){case"L":return p(m(b.month,e),n);case"LL":return p(h(2,e),n);case"Lo":return p(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}function ct(s,a,e){const t=_(s,e==null?void 0:e.in),r=Ce(t,e)-a;return t.setDate(t.getDate()-r*7),_(t,e==null?void 0:e.in)}class dt extends f{constructor(){super(...arguments);o(this,"priority",100);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,r){switch(t){case"w":return m(b.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return h(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return S(ct(e,r,n),n)}}function wt(s,a,e){const t=_(s,e==null?void 0:e.in),r=ze(t,e)-a;return t.setDate(t.getDate()-r*7),t}class ft extends f{constructor(){super(...arguments);o(this,"priority",100);o(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,r){switch(t){case"I":return m(b.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return h(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return we(wt(e,r))}}const yt=[31,28,31,30,31,30,31,31,30,31,30,31],mt=[31,29,31,30,31,30,31,31,30,31,30,31];class ht extends f{constructor(){super(...arguments);o(this,"priority",90);o(this,"subPriority",1);o(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"d":return m(b.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return h(t.length,e)}}validate(e,t){const r=e.getFullYear(),n=pe(r),u=e.getMonth();return n?t>=1&&t<=mt[u]:t>=1&&t<=yt[u]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}}class bt extends f{constructor(){super(...arguments);o(this,"priority",90);o(this,"subpriority",1);o(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,r){switch(t){case"D":case"DD":return m(b.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return h(t.length,e)}}validate(e,t){const r=e.getFullYear();return pe(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}}function oe(s,a,e){var q,I,M,c;const t=se(),r=(e==null?void 0:e.weekStartsOn)??((I=(q=e==null?void 0:e.locale)==null?void 0:q.options)==null?void 0:I.weekStartsOn)??t.weekStartsOn??((c=(M=t.locale)==null?void 0:M.options)==null?void 0:c.weekStartsOn)??0,n=_(s,e==null?void 0:e.in),u=n.getDay(),x=(a%7+7)%7,g=7-r,v=a<0||a>6?a-(u+g)%7:(x+g)%7-(u+g)%7;return ye(n,v,e)}class pt extends f{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=oe(e,r,n),e.setHours(0,0,0,0),e}}class xt extends f{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,r,n){const u=y=>{const x=Math.floor((y-1)/7)*7;return(y+n.weekStartsOn+6)%7+x};switch(t){case"e":case"ee":return p(h(t.length,e),u);case"eo":return p(r.ordinalNumber(e,{unit:"day"}),u);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=oe(e,r,n),e.setHours(0,0,0,0),e}}class gt extends f{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,r,n){const u=y=>{const x=Math.floor((y-1)/7)*7;return(y+n.weekStartsOn+6)%7+x};switch(t){case"c":case"cc":return p(h(t.length,e),u);case"co":return p(r.ordinalNumber(e,{unit:"day"}),u);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=oe(e,r,n),e.setHours(0,0,0,0),e}}function vt(s,a,e){const t=_(s,e==null?void 0:e.in),r=$e(t,e),n=a-r;return ye(t,n,e)}class Tt extends f{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,r){const n=u=>u===0?7:u;switch(t){case"i":case"ii":return h(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return p(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return p(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return p(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiii":default:return p(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=vt(e,r),e.setHours(0,0,0,0),e}}class Dt extends f{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ne(r),0,0,0),e}}class kt extends f{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ne(r),0,0,0),e}}class Mt extends f{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ne(r),0,0,0),e}}class _t extends f{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,r){switch(t){case"h":return m(b.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return h(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):!n&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}}class qt extends f{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,r){switch(t){case"H":return m(b.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return h(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}}class Ot extends f{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,r){switch(t){case"K":return m(b.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return h(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}}class Pt extends f{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,r){switch(t){case"k":return m(b.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return h(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}}class It extends f{constructor(){super(...arguments);o(this,"priority",60);o(this,"incompatibleTokens",["t","T"])}parse(e,t,r){switch(t){case"m":return m(b.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return h(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}}class Yt extends f{constructor(){super(...arguments);o(this,"priority",50);o(this,"incompatibleTokens",["t","T"])}parse(e,t,r){switch(t){case"s":return m(b.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return h(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}}class Et extends f{constructor(){super(...arguments);o(this,"priority",30);o(this,"incompatibleTokens",["t","T"])}parse(e,t){const r=n=>Math.trunc(n*Math.pow(10,-t.length+3));return p(h(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}}class Ht extends f{constructor(){super(...arguments);o(this,"priority",10);o(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return P(O.basicOptionalMinutes,e);case"XX":return P(O.basic,e);case"XXXX":return P(O.basicOptionalSeconds,e);case"XXXXX":return P(O.extendedOptionalSeconds,e);case"XXX":default:return P(O.extended,e)}}set(e,t,r){return t.timestampIsSet?e:E(e,e.getTime()-fe(e)-r)}}class Qt extends f{constructor(){super(...arguments);o(this,"priority",10);o(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return P(O.basicOptionalMinutes,e);case"xx":return P(O.basic,e);case"xxxx":return P(O.basicOptionalSeconds,e);case"xxxxx":return P(O.extendedOptionalSeconds,e);case"xxx":default:return P(O.extended,e)}}set(e,t,r){return t.timestampIsSet?e:E(e,e.getTime()-fe(e)-r)}}class Nt extends f{constructor(){super(...arguments);o(this,"priority",40);o(this,"incompatibleTokens","*")}parse(e){return he(e)}set(e,t,r){return[E(e,r*1e3),{timestampIsSet:!0}]}}class Lt extends f{constructor(){super(...arguments);o(this,"priority",20);o(this,"incompatibleTokens","*")}parse(e){return he(e)}set(e,t,r){return[E(e,r),{timestampIsSet:!0}]}}const Ct={G:new tt,y:new rt,Y:new at,R:new st,u:new nt,Q:new ot,q:new it,M:new lt,L:new ut,w:new dt,I:new ft,d:new ht,D:new bt,E:new pt,e:new xt,c:new gt,i:new Tt,a:new Dt,b:new kt,B:new Mt,h:new _t,H:new qt,K:new Ot,k:new Pt,m:new It,s:new Yt,S:new Et,X:new Ht,x:new Qt,t:new Nt,T:new Lt},zt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ft=/^'([^]*?)'?$/,Vt=/''/g,Wt=/\S/,Bt=/[a-zA-Z]/;function ae(s,a,e,t){var A,G,X,U,z,Z,$,j;const r=()=>E((t==null?void 0:t.in)||e,NaN),n=Ze(),u=(t==null?void 0:t.locale)??n.locale??Re,y=(t==null?void 0:t.firstWeekContainsDate)??((G=(A=t==null?void 0:t.locale)==null?void 0:A.options)==null?void 0:G.firstWeekContainsDate)??n.firstWeekContainsDate??((U=(X=n.locale)==null?void 0:X.options)==null?void 0:U.firstWeekContainsDate)??1,x=(t==null?void 0:t.weekStartsOn)??((Z=(z=t==null?void 0:t.locale)==null?void 0:z.options)==null?void 0:Z.weekStartsOn)??n.weekStartsOn??((j=($=n.locale)==null?void 0:$.options)==null?void 0:j.weekStartsOn)??0;if(!a)return s?r():_(e,t==null?void 0:t.in);const g={firstWeekContainsDate:y,weekStartsOn:x,locale:u},v=[new et(t==null?void 0:t.in,e)],q=a.match(Rt).map(w=>{const i=w[0];if(i in ce){const l=ce[i];return l(w,u.formatLong)}return w}).join("").match(zt),I=[];for(let w of q){!(t!=null&&t.useAdditionalWeekYearTokens)&&Fe(w)&&de(w,a,s),!(t!=null&&t.useAdditionalDayOfYearTokens)&&Ve(w)&&de(w,a,s);const i=w[0],l=Ct[i];if(l){const{incompatibleTokens:d}=l;if(Array.isArray(d)){const D=I.find(N=>d.includes(N.token)||N.token===i);if(D)throw new RangeError(`The format string mustn't contain \`${D.fullToken}\` and \`${w}\` at the same time`)}else if(l.incompatibleTokens==="*"&&I.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);I.push({token:i,fullToken:w});const Y=l.run(s,w,u.match,g);if(!Y)return r();v.push(Y.setter),s=Y.rest}else{if(i.match(Bt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");if(w==="''"?w="'":i==="'"&&(w=At(w)),s.indexOf(w)===0)s=s.slice(w.length);else return r()}}if(s.length>0&&Wt.test(s))return r();const M=v.map(w=>w.priority).sort((w,i)=>i-w).filter((w,i,l)=>l.indexOf(w)===i).map(w=>v.filter(i=>i.priority===w).sort((i,l)=>l.subPriority-i.subPriority)).map(w=>w[0]);let c=_(e,t==null?void 0:t.in);if(isNaN(+c))return r();const Q={};for(const w of M){if(!w.validate(c,g))return r();const i=w.set(c,Q,g);Array.isArray(i)?(c=i[0],Object.assign(Q,i[1])):c=i}return c}function At(s){return s.match(Ft)[1].replace(Vt,"'")}const Gt={class:"row"},Xt={class:"row q-mt-md"},Ut={class:"row justify-between items-center q-mt-md"},Zt={class:"row justify-between full-width"},$t={class:"text-body2 q-px-sm q-py-xs bg-primary text-white rounded-borders"},or={__name:"Index",setup(s){const a=ve(),e=Te(),t=k([]),r=k(null),n=a.query,u=k([]),y=k([]),x=k([]),g=k([]),v=k(!1);k([]),k([]);const q=k([]),I=k(0),M=k({page:1,rowsPerPage:50,rowsNumber:0}),c=k({dateFrom:"",dateTo:"",splitFilter:null,categoryQuery:"",parentCategoryId:null,categories:[],pizzerias:[],purpose_expression:"",sberDirection:null});De(c,()=>{M.value.page=1},{deep:!0});const Q=async i=>{var l,d,Y,D,N,K,R,ie;ue.show();try{const L=await V.get("/api/operations/",{params:{...c.value,isSplit:(l=c.value.splitFilter)==null?void 0:l.value,page:M.value.page,contractorIds:g.value,categoryIds:c.value.categories.map(F=>F.id),pizzeriaIds:c.value.pizzerias.map(F=>F.id)||r.value}});u.value=(d=L==null?void 0:L.data)==null?void 0:d.data,I.value=u.value.reduce((F,te)=>F+(te==null?void 0:te.sber_amountRub),0),M.value.rowsNumber=(D=(Y=L.data)==null?void 0:Y.meta)==null?void 0:D.total,M.value.page=(K=(N=L.data)==null?void 0:N.meta)==null?void 0:K.current_page,M.value.totalPages=(ie=(R=L.data)==null?void 0:R.meta)==null?void 0:ie.last_page}catch{W.create({message:"Ошибка получения данных",color:"red",timeout:2e3})}ue.hide()},A=async()=>{try{W.create({message:"Синхронизация запущена!"});const i=await V.get("/api/get-operations");W.create({message:"Синхронизация закончена!"})}catch{W.create({message:"Ошибка! Синхронизация транзакций не удалась!",color:"error"})}},G=async(i,l,d)=>{i.length>3?(v.value=!0,await X(i),l(()=>q.value),v.value=!1):(q.value=[],l(()=>q.value))},X=async(i="")=>{try{const l=await V.get("/api/categories",{params:{q:i||""}});q.value=l.data.data}catch{W.create({message:"Ошибка получения данных",color:"red",timeout:2e3})}},U=async(i,l,d)=>{i.length>3?(v.value=!0,await z(i),l(()=>y.value)):(y.value=[],l(()=>y.value))},z=async i=>{v.value=!0;try{const l=await V.get("/api/contractors",{params:{q:i||"",ids:g.value}});y.value=l.data.data,x.value=y.value.map(d=>({...d,value:d.id,label:d.name})),g.value=y.value.map(d=>d.id)}catch{}finally{v.value=!1}},Z=async()=>{try{const i=await V.get("/api/pizzerias");t.value=i.data.data}catch{}},$=()=>{JSON.parse(JSON.stringify(c.value)),Q()};ke(async()=>{await Z(),await j(n),g.value.length&&await z(),r.value.length&&(c.value.pizzerias=t.value.filter(i=>r.value.includes(String(i.id)))),await Q()});const j=async i=>{if(g.value=i.contractorIds||[],c.value.parentCategoryId=i.parentCategoryId||null,r.value=i.pizzeriaIds||[],i!=null&&i.groupBy&&(i!=null&&i.date)){const{groupBy:l,date:d}=i;switch(l){case"monthly":{const D=ae(d,"MM-yyyy",new Date);c.value.dateFrom=H(Ge(D),"yyyy-MM-dd"),c.value.dateTo=H(Ae(D),"yyyy-MM-dd");break}case"weekly":{const[D,N]=d.split("-").map(Number),K=new Date(N,0,1),R=Be(K,D-1);c.value.dateFrom=H(S(R,{weekStartsOn:1}),"yyyy-MM-dd"),c.value.dateTo=H(Xe(R,{weekStartsOn:1}),"yyyy-MM-dd");break}case"quarterly":{const D=ae(d,"Q-yyyy",new Date);c.value.dateFrom=H(We(D),"yyyy-MM-dd"),c.value.dateTo=H(Ue(D),"yyyy-MM-dd");break}default:const Y=ae(d,"d-MM-yyyy",new Date);c.value.dateFrom=H(Y,"yyyy-MM-dd"),c.value.dateTo=H(Y,"yyyy-MM-dd")}}},w=async()=>{await e.push({path:a.path,query:{}})};return(i,l)=>u.value?(Me(),_e(Ye,{key:0},{default:le(()=>[T(Ie,{onSubmit:Pe($,["prevent"]),class:"items-center q-pa-md bg-grey-4"},{default:le(()=>[C("div",Gt,[T(re,{class:"col-2 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:c.value.dateFrom,"onUpdate:modelValue":l[0]||(l[0]=d=>c.value.dateFrom=d),label:"Дата начала",type:"date"},null,8,["modelValue"]),T(re,{class:"col-2 q-px-sm q-mt-sm",dense:"",clearable:"",outlined:"",filled:"",modelValue:c.value.dateTo,"onUpdate:modelValue":l[1]||(l[1]=d=>c.value.dateTo=d),label:"Дата окончания",type:"date"},null,8,["modelValue"]),T(B,{class:"col-3 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",flat:"",label:"Категория",modelValue:c.value.categories,"onUpdate:modelValue":l[2]||(l[2]=d=>c.value.categories=d),options:q.value,"option-label":"name",clearable:"",multiple:"","use-input":"",borderless:"","use-chips":"",onFilter:G,loading:v.value},null,8,["modelValue","options","loading"]),T(B,{class:"col-3 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",label:"Пиццерия",modelValue:c.value.pizzerias,"onUpdate:modelValue":l[3]||(l[3]=d=>c.value.pizzerias=d),options:t.value,clearable:"","option-label":"name","option-value":"id",multiple:""},null,8,["modelValue","options"]),T(re,{class:"col-3 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:c.value.purpose_expression,"onUpdate:modelValue":l[4]||(l[4]=d=>c.value.purpose_expression=d),label:"Регулярное выражение"},null,8,["modelValue"]),T(B,{class:"col-3 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:c.value.sberDirection,"onUpdate:modelValue":l[5]||(l[5]=d=>c.value.sberDirection=d),label:"Тип операции",options:[{label:"DEBIT",value:"DEBIT"},{label:"CREDIT",value:"CREDIT"}]},null,8,["modelValue"]),T(B,{class:"col-6 q-mt-sm",dense:"",outlined:"",filled:"",label:"Контрагенты (получатели)",modelValue:x.value,"onUpdate:modelValue":l[6]||(l[6]=d=>x.value=d),options:y.value,"use-input":"",multiple:"",clearable:"","option-label":"name",onFilter:U,loading:v.value},null,8,["modelValue","options","loading"]),T(B,{class:"col-3 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:c.value.splitFilter,"onUpdate:modelValue":l[7]||(l[7]=d=>c.value.splitFilter=d),label:"Разделенные операции",options:[{label:"Все",value:null},{label:"Разделенные",value:!0},{label:"Неразделенные",value:!1}]},null,8,["modelValue"])]),C("div",Xt,[T(J,{class:"text-right q-pa-xs",dense:"",size:"sm",type:"submit",label:"Применить фильтры",color:"primary"}),T(J,{class:"text-right q-ml-sm q-pa-xs",dense:"",size:"sm",onClick:w,label:"Очистить фильтры",color:"primary"})]),C("div",Ut,[C("div",Zt,[C("div",null,[T(J,{onClick:A,label:"Синхронизироать тразакции",dense:"",size:"sm",color:"primary",class:"q-mr-sm q-pa-xs"}),T(J,{to:"/operations/create",class:"text-right q-pa-xs",dense:"",size:"sm",label:"Создать операцию",color:"primary"})]),C("div",null,[C("p",$t,"Итого: "+Oe(I.value),1)])])])]),_:1}),T(Ee,{operations:u.value,pagination:M.value,"onUpdate:pagination":l[8]||(l[8]=d=>{M.value=d,Q()}),onRefresh:Q},null,8,["operations","pagination"])]),_:1})):qe("",!0)}};export{or as default};
