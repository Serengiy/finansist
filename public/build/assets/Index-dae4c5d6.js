var he=Object.defineProperty;var be=(s,a,e)=>a in s?he(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var o=(s,a,e)=>(be(s,typeof a!="symbol"?a+"":a,e),e);import{u as pe,i as xe,r as T,j as ge,k as ve,o as Te,c as De,w as ne,l as ke,m as Z,N as oe,a as k,b as C,e as S,f as ee,t as Me,d as _e}from"./app-90bf6a79.js";import{Q as $}from"./QSelect-4ea1f147.js";import{Q as Oe}from"./QForm-b0f9c6cf.js";import{Q as Pe}from"./QPage-3662eeea.js";import{_ as qe}from"./OperationTable-335037bf.js";import{t as M,g as re,c as I,m as Ie,a as Ye,b as Ee,d as He,s as j,e as ue,f as Qe,h as Ne,i as ce,j as Le,l as ie,k as Ce,w as le,n as ze,o as E}from"./format-04e7afb3.js";import{a as de,s as Re,b as Fe}from"./startOfQuarter-72f9bb24.js";import"./QTable-ca0f14f3.js";import"./QPagination-de6aaaf7.js";function Ve(s,a){const e=M(s,a==null?void 0:a.in),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function We(s,a){const e=M(s,a==null?void 0:a.in);return e.setDate(1),e.setHours(0,0,0,0),e}function Be(s,a){var f,p,x,g;const e=re(),t=(a==null?void 0:a.weekStartsOn)??((p=(f=a==null?void 0:a.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??e.weekStartsOn??((g=(x=e.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??0,r=M(s,a==null?void 0:a.in),n=r.getDay(),c=(n<t?-7:0)+6-(n-t);return r.setDate(r.getDate()+c),r.setHours(23,59,59,999),r}function Ae(s,a){const e=M(s,a==null?void 0:a.in),t=e.getMonth(),r=t-t%3+3;return e.setMonth(r,0),e.setHours(23,59,59,999),e}function Ge(){return Object.assign({},re())}function Xe(s,a){const e=M(s,a==null?void 0:a.in).getDay();return e===0?7:e}function Ue(s,a){const e=Ze(a)?new a(0):I(a,0);return e.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),e.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e}function Ze(s){var a;return typeof s=="function"&&((a=s.prototype)==null?void 0:a.constructor)===s}const $e=10;class we{constructor(){o(this,"subPriority",0)}validate(a,e){return!0}}class je extends we{constructor(a,e,t,r,n){super(),this.value=a,this.validateValue=e,this.setValue=t,this.priority=r,n&&(this.subPriority=n)}validate(a,e){return this.validateValue(a,this.value,e)}set(a,e,t){return this.setValue(a,e,this.value,t)}}class Ke extends we{constructor(e,t){super();o(this,"priority",$e);o(this,"subPriority",-1);this.context=e||(r=>I(t,r))}set(e,t){return t.timestampIsSet?e:I(e,Ue(e,this.context))}}class w{run(a,e,t,r){const n=this.parse(a,e,t,r);return n?{setter:new je(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(a,e,t){return!0}}class Je extends w{constructor(){super(...arguments);o(this,"priority",140);o(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}const h={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},O={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function b(s,a){return s&&{value:a(s.value),rest:s.rest}}function y(s,a){const e=a.match(s);return e?{value:parseInt(e[0],10),rest:a.slice(e[0].length)}:null}function P(s,a){const e=a.match(s);if(!e)return null;if(e[0]==="Z")return{value:0,rest:a.slice(1)};const t=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,n=e[3]?parseInt(e[3],10):0,c=e[5]?parseInt(e[5],10):0;return{value:t*(r*Ie+n*Ye+c*Ee),rest:a.slice(e[0].length)}}function fe(s){return y(h.anyDigitsSigned,s)}function m(s,a){switch(s){case 1:return y(h.singleDigit,a);case 2:return y(h.twoDigits,a);case 3:return y(h.threeDigits,a);case 4:return y(h.fourDigits,a);default:return y(new RegExp("^\\d{1,"+s+"}"),a)}}function K(s,a){switch(s){case 1:return y(h.singleDigitSigned,a);case 2:return y(h.twoDigitsSigned,a);case 3:return y(h.threeDigitsSigned,a);case 4:return y(h.fourDigitsSigned,a);default:return y(new RegExp("^-?\\d{1,"+s+"}"),a)}}function ae(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ye(s,a){const e=a>0,t=e?a:1-a;let r;if(t<=50)r=s||100;else{const n=t+50,c=Math.trunc(n/100)*100,f=s>=n%100;r=s+c-(f?100:0)}return e?r:1-r}function me(s){return s%400===0||s%4===0&&s%100!==0}class Se extends w{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,r){const n=c=>({year:c,isTwoDigitYear:t==="yy"});switch(t){case"y":return b(m(4,e),n);case"yo":return b(r.ordinalNumber(e,{unit:"year"}),n);default:return b(m(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const n=e.getFullYear();if(r.isTwoDigitYear){const f=ye(r.year,n);return e.setFullYear(f,0,1),e.setHours(0,0,0,0),e}const c=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}}class et extends w{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,r){const n=c=>({year:c,isTwoDigitYear:t==="YY"});switch(t){case"Y":return b(m(4,e),n);case"Yo":return b(r.ordinalNumber(e,{unit:"year"}),n);default:return b(m(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){const c=He(e,n);if(r.isTwoDigitYear){const p=ye(r.year,c);return e.setFullYear(p,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),j(e,n)}const f=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(f,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),j(e,n)}}class tt extends w{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return K(t==="R"?4:t.length,e)}set(e,t,r){const n=I(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),ue(n)}}class rt extends w{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return K(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}class at extends w{constructor(){super(...arguments);o(this,"priority",120);o(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"Q":case"QQ":return m(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class st extends w{constructor(){super(...arguments);o(this,"priority",120);o(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"q":case"qq":return m(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class nt extends w{constructor(){super(...arguments);o(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);o(this,"priority",110)}parse(e,t,r){const n=c=>c-1;switch(t){case"M":return b(y(h.month,e),n);case"MM":return b(m(2,e),n);case"Mo":return b(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class ot extends w{constructor(){super(...arguments);o(this,"priority",110);o(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,r){const n=c=>c-1;switch(t){case"L":return b(y(h.month,e),n);case"LL":return b(m(2,e),n);case"Lo":return b(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}function it(s,a,e){const t=M(s,e==null?void 0:e.in),r=Qe(t,e)-a;return t.setDate(t.getDate()-r*7),M(t,e==null?void 0:e.in)}class lt extends w{constructor(){super(...arguments);o(this,"priority",100);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,r){switch(t){case"w":return y(h.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return m(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return j(it(e,r,n),n)}}function ut(s,a,e){const t=M(s,e==null?void 0:e.in),r=Ne(t,e)-a;return t.setDate(t.getDate()-r*7),t}class ct extends w{constructor(){super(...arguments);o(this,"priority",100);o(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,r){switch(t){case"I":return y(h.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return m(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return ue(ut(e,r))}}const dt=[31,28,31,30,31,30,31,31,30,31,30,31],wt=[31,29,31,30,31,30,31,31,30,31,30,31];class ft extends w{constructor(){super(...arguments);o(this,"priority",90);o(this,"subPriority",1);o(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"d":return y(h.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return m(t.length,e)}}validate(e,t){const r=e.getFullYear(),n=me(r),c=e.getMonth();return n?t>=1&&t<=wt[c]:t>=1&&t<=dt[c]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}}class yt extends w{constructor(){super(...arguments);o(this,"priority",90);o(this,"subpriority",1);o(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,r){switch(t){case"D":case"DD":return y(h.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return m(t.length,e)}}validate(e,t){const r=e.getFullYear();return me(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}}function se(s,a,e){var _,q,D,d;const t=re(),r=(e==null?void 0:e.weekStartsOn)??((q=(_=e==null?void 0:e.locale)==null?void 0:_.options)==null?void 0:q.weekStartsOn)??t.weekStartsOn??((d=(D=t.locale)==null?void 0:D.options)==null?void 0:d.weekStartsOn)??0,n=M(s,e==null?void 0:e.in),c=n.getDay(),p=(a%7+7)%7,x=7-r,g=a<0||a>6?a-(c+x)%7:(p+x)%7-(c+x)%7;return de(n,g,e)}class mt extends w{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=se(e,r,n),e.setHours(0,0,0,0),e}}class ht extends w{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,r,n){const c=f=>{const p=Math.floor((f-1)/7)*7;return(f+n.weekStartsOn+6)%7+p};switch(t){case"e":case"ee":return b(m(t.length,e),c);case"eo":return b(r.ordinalNumber(e,{unit:"day"}),c);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=se(e,r,n),e.setHours(0,0,0,0),e}}class bt extends w{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,r,n){const c=f=>{const p=Math.floor((f-1)/7)*7;return(f+n.weekStartsOn+6)%7+p};switch(t){case"c":case"cc":return b(m(t.length,e),c);case"co":return b(r.ordinalNumber(e,{unit:"day"}),c);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=se(e,r,n),e.setHours(0,0,0,0),e}}function pt(s,a,e){const t=M(s,e==null?void 0:e.in),r=Xe(t,e),n=a-r;return de(t,n,e)}class xt extends w{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,r){const n=c=>c===0?7:c;switch(t){case"i":case"ii":return m(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return b(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return b(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return b(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiii":default:return b(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=pt(e,r),e.setHours(0,0,0,0),e}}class gt extends w{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ae(r),0,0,0),e}}class vt extends w{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ae(r),0,0,0),e}}class Tt extends w{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ae(r),0,0,0),e}}class Dt extends w{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,r){switch(t){case"h":return y(h.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return m(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):!n&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}}class kt extends w{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,r){switch(t){case"H":return y(h.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return m(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}}class Mt extends w{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,r){switch(t){case"K":return y(h.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return m(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}}class _t extends w{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,r){switch(t){case"k":return y(h.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return m(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}}class Ot extends w{constructor(){super(...arguments);o(this,"priority",60);o(this,"incompatibleTokens",["t","T"])}parse(e,t,r){switch(t){case"m":return y(h.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return m(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}}class Pt extends w{constructor(){super(...arguments);o(this,"priority",50);o(this,"incompatibleTokens",["t","T"])}parse(e,t,r){switch(t){case"s":return y(h.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return m(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}}class qt extends w{constructor(){super(...arguments);o(this,"priority",30);o(this,"incompatibleTokens",["t","T"])}parse(e,t){const r=n=>Math.trunc(n*Math.pow(10,-t.length+3));return b(m(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}}class It extends w{constructor(){super(...arguments);o(this,"priority",10);o(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return P(O.basicOptionalMinutes,e);case"XX":return P(O.basic,e);case"XXXX":return P(O.basicOptionalSeconds,e);case"XXXXX":return P(O.extendedOptionalSeconds,e);case"XXX":default:return P(O.extended,e)}}set(e,t,r){return t.timestampIsSet?e:I(e,e.getTime()-ce(e)-r)}}class Yt extends w{constructor(){super(...arguments);o(this,"priority",10);o(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return P(O.basicOptionalMinutes,e);case"xx":return P(O.basic,e);case"xxxx":return P(O.basicOptionalSeconds,e);case"xxxxx":return P(O.extendedOptionalSeconds,e);case"xxx":default:return P(O.extended,e)}}set(e,t,r){return t.timestampIsSet?e:I(e,e.getTime()-ce(e)-r)}}class Et extends w{constructor(){super(...arguments);o(this,"priority",40);o(this,"incompatibleTokens","*")}parse(e){return fe(e)}set(e,t,r){return[I(e,r*1e3),{timestampIsSet:!0}]}}class Ht extends w{constructor(){super(...arguments);o(this,"priority",20);o(this,"incompatibleTokens","*")}parse(e){return fe(e)}set(e,t,r){return[I(e,r),{timestampIsSet:!0}]}}const Qt={G:new Je,y:new Se,Y:new et,R:new tt,u:new rt,Q:new at,q:new st,M:new nt,L:new ot,w:new lt,I:new ct,d:new ft,D:new yt,E:new mt,e:new ht,c:new bt,i:new xt,a:new gt,b:new vt,B:new Tt,h:new Dt,H:new kt,K:new Mt,k:new _t,m:new Ot,s:new Pt,S:new qt,X:new It,x:new Yt,t:new Et,T:new Ht},Nt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Lt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ct=/^'([^]*?)'?$/,zt=/''/g,Rt=/\S/,Ft=/[a-zA-Z]/;function te(s,a,e,t){var V,W,B,z,A,G,X,U;const r=()=>I((t==null?void 0:t.in)||e,NaN),n=Ge(),c=(t==null?void 0:t.locale)??n.locale??Le,f=(t==null?void 0:t.firstWeekContainsDate)??((W=(V=t==null?void 0:t.locale)==null?void 0:V.options)==null?void 0:W.firstWeekContainsDate)??n.firstWeekContainsDate??((z=(B=n.locale)==null?void 0:B.options)==null?void 0:z.firstWeekContainsDate)??1,p=(t==null?void 0:t.weekStartsOn)??((G=(A=t==null?void 0:t.locale)==null?void 0:A.options)==null?void 0:G.weekStartsOn)??n.weekStartsOn??((U=(X=n.locale)==null?void 0:X.options)==null?void 0:U.weekStartsOn)??0;if(!a)return s?r():M(e,t==null?void 0:t.in);const x={firstWeekContainsDate:f,weekStartsOn:p,locale:c},g=[new Ke(t==null?void 0:t.in,e)],_=a.match(Lt).map(i=>{const l=i[0];if(l in ie){const u=ie[l];return u(i,c.formatLong)}return i}).join("").match(Nt),q=[];for(let i of _){!(t!=null&&t.useAdditionalWeekYearTokens)&&Ce(i)&&le(i,a,s),!(t!=null&&t.useAdditionalDayOfYearTokens)&&ze(i)&&le(i,a,s);const l=i[0],u=Qt[l];if(u){const{incompatibleTokens:Y}=u;if(Array.isArray(Y)){const Q=q.find(N=>Y.includes(N.token)||N.token===l);if(Q)throw new RangeError(`The format string mustn't contain \`${Q.fullToken}\` and \`${i}\` at the same time`)}else if(u.incompatibleTokens==="*"&&q.length>0)throw new RangeError(`The format string mustn't contain \`${i}\` and any other token at the same time`);q.push({token:l,fullToken:i});const v=u.run(s,i,c.match,x);if(!v)return r();g.push(v.setter),s=v.rest}else{if(l.match(Ft))throw new RangeError("Format string contains an unescaped latin alphabet character `"+l+"`");if(i==="''"?i="'":l==="'"&&(i=Vt(i)),s.indexOf(i)===0)s=s.slice(i.length);else return r()}}if(s.length>0&&Rt.test(s))return r();const D=g.map(i=>i.priority).sort((i,l)=>l-i).filter((i,l,u)=>u.indexOf(i)===l).map(i=>g.filter(l=>l.priority===i).sort((l,u)=>u.subPriority-l.subPriority)).map(i=>i[0]);let d=M(e,t==null?void 0:t.in);if(isNaN(+d))return r();const H={};for(const i of D){if(!i.validate(d,x))return r();const l=i.set(d,H,x);Array.isArray(l)?(d=l[0],Object.assign(H,l[1])):d=l}return d}function Vt(s){return s.match(Ct)[1].replace(zt,"'")}const Wt={class:"row"},Bt={class:"row q-mt-md"},At={class:"row justify-between items-center q-mt-md"},Gt={class:"row justify-between full-width"},Xt={class:"text-body2 q-px-sm q-py-xs bg-primary text-white rounded-borders"},ar={__name:"Index",setup(s){const a=pe(),e=xe(),t=T([]),r=T(null),n=a.query,c=T([]),f=T([]),p=T([]),x=T([]),g=T(!1);T([]),T([]);const _=T([]),q=T(0),D=T({page:1,rowsPerPage:50,rowsNumber:0}),d=T({dateFrom:"",dateTo:"",categoryQuery:"",parentCategoryId:null,categories:[],pizzerias:[],purpose_expression:"",sberDirection:null});ge(d,()=>{D.value.page=1},{deep:!0});const H=async i=>{var l,u,Y,v,Q,N,R;try{const L=await Z.get("/api/operations/",{params:{...d.value,page:D.value.page,contractorIds:x.value,categoryIds:d.value.categories.map(F=>F.id),pizzeriaIds:d.value.pizzerias.map(F=>F.id)||r.value}});c.value=(l=L==null?void 0:L.data)==null?void 0:l.data,q.value=c.value.reduce((F,J)=>F+(J==null?void 0:J.sber_amountRub),0),D.value.rowsNumber=(Y=(u=L.data)==null?void 0:u.meta)==null?void 0:Y.total,D.value.page=(Q=(v=L.data)==null?void 0:v.meta)==null?void 0:Q.current_page,D.value.totalPages=(R=(N=L.data)==null?void 0:N.meta)==null?void 0:R.last_page}catch{oe.create({message:"Ошибка получения данных",color:"red",timeout:2e3})}},V=async(i,l,u)=>{i.length>3?(g.value=!0,await W(i),l(()=>_.value),g.value=!1):(_.value=[],l(()=>_.value))},W=async(i="")=>{try{const l=await Z.get("/api/categories",{params:{q:i||""}});_.value=l.data.data}catch{oe.create({message:"Ошибка получения данных",color:"red",timeout:2e3})}},B=async(i,l,u)=>{i.length>3?(g.value=!0,await z(i),l(()=>f.value)):(f.value=[],l(()=>f.value))},z=async i=>{g.value=!0;try{const l=await Z.get("/api/contractors",{params:{q:i||"",ids:x.value}});f.value=l.data.data,p.value=f.value.map(u=>({...u,value:u.id,label:u.name})),x.value=f.value.map(u=>u.id)}catch{}finally{g.value=!1}},A=async()=>{try{const i=await Z.get("/api/pizzerias");t.value=i.data.data}catch{}},G=()=>{JSON.parse(JSON.stringify(d.value)),H()};ve(async()=>{await A(),await X(n),x.value.length&&await z(),r.value.length&&(d.value.pizzerias=t.value.filter(i=>r.value.includes(String(i.id)))),await H()});const X=async i=>{if(x.value=i.contractorIds||[],d.value.parentCategoryId=i.parentCategoryId||null,r.value=i.pizzeriaIds||[],i!=null&&i.groupBy&&(i!=null&&i.date)){const{groupBy:l,date:u}=i;switch(l){case"monthly":{const v=te(u,"MM-yyyy",new Date);d.value.dateFrom=E(We(v),"yyyy-MM-dd"),d.value.dateTo=E(Ve(v),"yyyy-MM-dd");break}case"weekly":{const[v,Q]=u.split("-").map(Number),N=new Date(Q,0,1),R=Fe(N,v-1);d.value.dateFrom=E(j(R,{weekStartsOn:1}),"yyyy-MM-dd"),d.value.dateTo=E(Be(R,{weekStartsOn:1}),"yyyy-MM-dd");break}case"quarterly":{const v=te(u,"Q-yyyy",new Date);d.value.dateFrom=E(Re(v),"yyyy-MM-dd"),d.value.dateTo=E(Ae(v),"yyyy-MM-dd");break}default:const Y=te(u,"d-MM-yyyy",new Date);d.value.dateFrom=E(Y,"yyyy-MM-dd"),d.value.dateTo=E(Y,"yyyy-MM-dd")}}},U=async()=>{await e.push({path:a.path,query:{}})};return(i,l)=>c.value?(Te(),De(Pe,{key:0},{default:ne(()=>[k(Oe,{onSubmit:_e(G,["prevent"]),class:"items-center q-pa-md bg-grey-4"},{default:ne(()=>[C("div",Wt,[k(S,{class:"col-2 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:d.value.dateFrom,"onUpdate:modelValue":l[0]||(l[0]=u=>d.value.dateFrom=u),label:"Дата начала",type:"date"},null,8,["modelValue"]),k(S,{class:"col-2 q-px-sm q-mt-sm",dense:"",clearable:"",outlined:"",filled:"",modelValue:d.value.dateTo,"onUpdate:modelValue":l[1]||(l[1]=u=>d.value.dateTo=u),label:"Дата окончания",type:"date"},null,8,["modelValue"]),k($,{class:"col-3 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",flat:"",label:"Категория",modelValue:d.value.categories,"onUpdate:modelValue":l[2]||(l[2]=u=>d.value.categories=u),options:_.value,"option-label":"name",clearable:"",multiple:"","use-input":"",borderless:"","use-chips":"",onFilter:V,loading:g.value},null,8,["modelValue","options","loading"]),k($,{class:"col-3 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",label:"Пиццерия",modelValue:d.value.pizzerias,"onUpdate:modelValue":l[3]||(l[3]=u=>d.value.pizzerias=u),options:t.value,clearable:"","option-label":"name","option-value":"id",multiple:""},null,8,["modelValue","options"]),k(S,{class:"col-3 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:d.value.purpose_expression,"onUpdate:modelValue":l[4]||(l[4]=u=>d.value.purpose_expression=u),label:"Регулярное выражение"},null,8,["modelValue"]),k($,{class:"col-3 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:d.value.sberDirection,"onUpdate:modelValue":l[5]||(l[5]=u=>d.value.sberDirection=u),label:"Тип операции",options:[{label:"DEBIT",value:"DEBIT"},{label:"CREDIT",value:"CREDIT"}]},null,8,["modelValue"]),k($,{class:"col-6 q-mt-sm",dense:"",outlined:"",filled:"",label:"Контрагенты (получатели)",modelValue:p.value,"onUpdate:modelValue":l[6]||(l[6]=u=>p.value=u),options:f.value,"use-input":"",multiple:"",clearable:"","option-label":"name",onFilter:B,loading:g.value},null,8,["modelValue","options","loading"])]),C("div",Bt,[k(ee,{class:"text-right",dense:"",size:"sm",type:"submit",label:"Применить фильтры",color:"primary"}),k(ee,{class:"text-right q-ml-sm",dense:"",size:"sm",onClick:U,label:"Очистить фильтры",color:"primary"})]),C("div",At,[C("div",Gt,[C("div",null,[k(ee,{to:"/operations/create",class:"text-right",dense:"",size:"sm",label:"Создать операцию",color:"primary"})]),C("div",null,[C("p",Xt,"Итого: "+Me(q.value),1)])])])]),_:1}),k(qe,{operations:c.value,pagination:D.value,"onUpdate:pagination":l[7]||(l[7]=u=>{D.value=u,H()}),onRefresh:H},null,8,["operations","pagination"])]),_:1})):ke("",!0)}};export{ar as default};
