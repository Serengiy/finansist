import{r as Q,v as q,b as o,l as n,g as i,d as p,F as d,m as u,t as c,e as r,c as C,k as j,$ as B,h as w,P as _,N as h}from"./app-709df95d.js";import{a as R,Q as T}from"./QTable-b060046c.js";import{Q as U}from"./QPagination-965ff517.js";const O={key:0,class:"shadow-3"},$={key:3},E={class:"row bg-white justify-center q-pb-md rounded-borders"},F={key:1,class:"row q-mt-sm bg-white justify-center q-pb-md rounded-borders shadow-3"},A={__name:"OperationTable",props:{operations:Array,pagination:Object},emits:["update:pagination","refresh"],setup(a,{emit:k}){const P=a,x=Q([{name:"sber_amountRub",label:"Сумма",field:"sber_amountRub",align:"left"},{name:"categories",label:"Категория",field:"categories",align:"left"},{name:"is_manual",label:"is manual",field:"is_manual",align:"left"},{name:"actions",label:"Действия",align:"left"},{name:"date_at",label:"Дата",field:"date_at",align:"left"},{name:"sber_paymentPurpose",label:"Назначение",field:"sber_paymentPurpose",align:"left"}]),v=k,V=l=>{v("update:pagination",{...P.pagination,page:l})},N=async l=>{var t;_.show();try{const s=await axios.put(`/api/operations/${l.id}`,{is_manual:l.is_manual});(t=s==null?void 0:s.data)!=null&&t.success&&h.create({message:"Обновлено",color:"green",timeout:2e3})}catch{h.create({message:"Ошибка обновления",color:"red",timeout:2e3})}_.hide()};return(l,t)=>{const s=q("router-link");return a.operations.length?(o(),n("div",O,[i(T,{flat:"",class:"q-mt-md q-px-sm",rows:a.operations,pagination:{rowsPerPage:a.pagination.rowsPerPage},columns:x.value,"row-key":"id","hide-bottom":""},{"body-cell":p(e=>[i(R,{item:e},{default:p(()=>{var g,b,f,y;return[e.col.name==="sber_amountRub"?(o(),n(d,{key:0},[u(c((g=e.row)==null?void 0:g.sber_amountRub),1)],64)):r("",!0),e.col.name==="categories"?(o(),n(d,{key:1},[u(c((b=e.row)==null?void 0:b.categories.map(m=>m.name).join(", ")),1)],64)):r("",!0),e.col.name==="is_manual"?(o(),C(j,{key:2,"onUpdate:modelValue":[m=>e.row.is_manual=m,m=>N(e.row)],"model-value":e.row.is_manual},null,8,["onUpdate:modelValue","model-value"])):r("",!0),e.col.name==="actions"?(o(),n("div",$,[i(s,{to:{name:"OperationEdit",params:{id:e.row.id}},class:"cursor-pointer"},{default:p(()=>[i(B,{color:"primary",size:"xs",name:"edit",class:"cursor-pointer"})]),_:2},1032,["to"])])):r("",!0),e.col.name==="date_at"?(o(),n(d,{key:4},[u(c((f=e.row)==null?void 0:f.date_at),1)],64)):r("",!0),e.col.name==="sber_paymentPurpose"?(o(),n(d,{key:5},[u(c((y=e.row)==null?void 0:y.sber_paymentPurpose),1)],64)):r("",!0)]}),_:2},1032,["item"])]),_:1},8,["rows","pagination","columns"]),w("div",E,[i(U,{modelValue:a.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=e=>a.pagination.page=e),V],max:Math.ceil(a.pagination.rowsNumber/a.pagination.rowsPerPage),"boundary-numbers":"","boundary-links":"","max-pages":10,class:"text-center q-mt-md"},null,8,["modelValue","max"])])])):(o(),n("div",F,t[1]||(t[1]=[w("p",{class:"text-h6"}," Для этого контрагента операции не найдены ",-1)])))}}};export{A as _};
