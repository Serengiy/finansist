import{r as _,o as s,c as g,w as a,u as A,Q as ae,a as o,b as X,d as n,e as P,f as B,g as kl,h as ue,i as V,j as Q,k as Y,p as te,l as se,m as J,n as c,t as k,q as b,s as ol,v as m,F as w,x as hl,y as yl,z as xl,A as Vl,B as $l,C as Cl,P as u,D as N,E as K,G as W,H as Xe,I as Ye,J as T,N as oe}from"./app-64dafc3a.js";import{Q as H,a as Z}from"./QSelect-fcdeceb1.js";import{Q as ne}from"./QSpace-767f85f1.js";import{Q as el}from"./QBtnDropdown-c8281bd3.js";import{Q as zl}from"./QImg-4607bda3.js";import{Q as ce}from"./QTooltip-3ff6951b.js";import{Q as Ol}from"./QExpansionItem-3bf5a263.js";import{Q as Dl,a as Ul}from"./QTable-9f10ca35.js";import{Q as ll}from"./QPagination-9c29fd07.js";import{C as q}from"./ClosePopup-9fac0edc.js";import{P as Ql,D as ql}from"./DefectivePropDialog-af9feb44.js";import{Q as pe}from"./QForm-db958e76.js";import{u as M}from"./use-dialog-plugin-component-00e1baf8.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as Il}from"./ImageDialog-5fc91dda.js";import"./QChip-18101fab.js";import"./position-engine-f936ecea.js";import"./QSlideTransition-5ec42607.js";const F=h=>(te("data-v-b94a3f12"),h=h(),se(),h),Pl=F(()=>n("h5",{class:"text-center"},"Изменение цен текущих товаров",-1)),Bl={class:"row"},Sl={class:"col"},Nl={class:"q-mt-md q-card--bordered rounded-borders q-pa-sm"},Kl={class:"row justify-between items-center"},Wl=F(()=>n("strong",null,"Изменение цены для Wildberries",-1)),Zl={class:"row justify-between items-center"},Hl=F(()=>n("strong",null,"Изменение цены для OZON",-1)),Rl={class:"row justify-between items-center"},jl=F(()=>n("strong",null,"Изменение цены до скидки (OZON МП)",-1)),Tl={class:"row justify-between items-center"},Al=F(()=>n("strong",null,"Изменение минимальной цены (OZON МП)",-1)),Ml={class:"q-mt-md"},Fl={class:""},El={class:"q-mt-md q-card--bordered"},Ll=F(()=>n("span",{class:"text-body2"}," Изменение прайса на указанное количество процентов/суммы ",-1)),Gl={class:"q-mt-md q-card--bordered"},Jl={class:"q-mt-md q-card--bordered"},Xl=F(()=>n("br",null,null,-1)),Yl={__name:"CommonPriceDialog",emits:[...M.emits],setup(h){const x=_(0),C=_(null);_("increase");const $=_("increase"),O=_("percentage"),d=_("price_retail"),{dialogRef:I,onDialogHide:z,onDialogOK:U,onDialogCancel:S}=M();function ee(){U({data:{new_price:x.value,selected_price:C.value,value:O.value,price_from:d.value,action:$.value}})}const le=(R,v)=>(R=R==="increase"?"":"-",v=v==="percentage"?"%":"₽",`${R}${v}`);return(R,v)=>(s(),g(ae,{ref_key:"dialogRef",ref:I,onHide:A(z)},{default:a(()=>[o(Y,{class:"dialog q-pa-lg"},{default:a(()=>[Pl,o(pe,{onSubmit:ee},{default:a(()=>[o(X,{class:"q-gutter-md"},{default:a(()=>[n("div",Bl,[n("div",Sl,[n("div",Nl,[n("div",Kl,[Wl,o(P,{modelValue:C.value,"onUpdate:modelValue":v[0]||(v[0]=f=>C.value=f),val:"wb"},null,8,["modelValue"])]),n("div",Zl,[Hl,o(P,{modelValue:C.value,"onUpdate:modelValue":v[1]||(v[1]=f=>C.value=f),val:"ozon"},null,8,["modelValue"])]),n("div",Rl,[jl,o(P,{modelValue:C.value,"onUpdate:modelValue":v[2]||(v[2]=f=>C.value=f),val:"old_price"},null,8,["modelValue"])]),n("div",Tl,[Al,o(P,{modelValue:C.value,"onUpdate:modelValue":v[3]||(v[3]=f=>C.value=f),val:"min_price"},null,8,["modelValue"])])]),n("div",Ml,[o(B,{mask:"#","fill-mask":"0","reverse-fill-mask":"","aria-valuemax":"100",prefix:le($.value,O.value),modelValue:x.value,"onUpdate:modelValue":v[4]||(v[4]=f=>x.value=f),outlined:"",dense:""},null,8,["prefix","modelValue"]),n("div",Fl,[n("div",El,[o(P,{modelValue:O.value,"onUpdate:modelValue":v[5]||(v[5]=f=>O.value=f),val:"percentage",label:"Проценты"},null,8,["modelValue"]),o(P,{modelValue:O.value,"onUpdate:modelValue":v[6]||(v[6]=f=>O.value=f),val:"value",label:"Сумма"},null,8,["modelValue"]),o(kl,{class:"q-ml-lg text-h6",color:"grey",name:"help_outline"},{default:a(()=>[o(ce,{anchor:"top end",self:"bottom middle"},{default:a(()=>[Ll]),_:1})]),_:1})]),n("div",Gl,[o(P,{modelValue:$.value,"onUpdate:modelValue":v[7]||(v[7]=f=>$.value=f),val:"increase",label:"Увеличение прайса"},null,8,["modelValue"]),o(P,{modelValue:$.value,"onUpdate:modelValue":v[8]||(v[8]=f=>$.value=f),val:"decrease",label:"Уменьшение прайса"},null,8,["modelValue"])])])]),n("div",Jl,[o(P,{modelValue:d.value,"onUpdate:modelValue":v[9]||(v[9]=f=>d.value=f),val:"price_retail",label:"Изменения от розничной"},null,8,["modelValue"]),o(P,{modelValue:d.value,"onUpdate:modelValue":v[10]||(v[10]=f=>d.value=f),val:"price_marketplace",label:"Изменения от мп"},null,8,["modelValue"]),o(P,{modelValue:d.value,"onUpdate:modelValue":v[11]||(v[11]=f=>d.value=f),val:"price_current",label:"Изменения от действительной"},null,8,["modelValue"])])])]),Xl]),_:1}),o(ue,{align:"right"},{default:a(()=>[o(ne),o(V,{color:"green",label:"OK",type:"submit",unelevated:""}),Q(o(V,{color:"red",label:"Отмена",unelevated:""},null,512),[[q]])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},eo=de(Yl,[["__scopeId","data-v-b94a3f12"]]);const re=h=>(te("data-v-af622e37"),h=h(),se(),h),lo=re(()=>n("h5",{class:"text-center"}," Синхронизация маркетплейсов ",-1)),oo={class:"row"},ao={class:"col"},to=re(()=>n("strong",null,"Синхронизация Wildberries",-1)),so={class:"row"},no=re(()=>n("br",null,null,-1)),ro={class:"row"},io={class:"col"},co=re(()=>n("strong",null,"Синхронизация ОЗОН",-1)),uo={class:"row"},po={key:0},_o={__name:"SyncMarketPlaceDialog",emits:[...M.emits],setup(h){_(0),_(0);const x=_({}),{dialogRef:C,onDialogHide:$,onDialogOK:O,onDialogCancel:d}=M();function I(){O({mp_statuses:x.value})}return(z,U)=>(s(),g(ae,{ref_key:"dialogRef",ref:C,onHide:A($)},{default:a(()=>[o(Y,{class:"dialog q-pa-lg"},{default:a(()=>[lo,o(pe,{onSubmit:I},{default:a(()=>[o(X,{class:"q-gutter-md"},{default:a(()=>[n("div",oo,[n("div",ao,[to,n("div",so,[o(J,null,{default:a(()=>[o(H,{class:"col-1",modelValue:x.value.wb,"onUpdate:modelValue":U[0]||(U[0]=S=>x.value.wb=S),options:[{id:"activate",name:"Синхронизировать WB"},{id:"deactivate",name:"Рассинхронизировать WB"}],"option-label":"name","option-value":"id",label:"Маркетплейс",multiple:!1,clearable:"",dense:"","emit-value":"","map-options":"",outlined:"","use-chips":""},null,8,["modelValue"])]),_:1})])])]),no,n("div",ro,[n("div",io,[co,n("div",uo,[o(J,null,{default:a(()=>[o(H,{class:"col-1",modelValue:x.value.ozon,"onUpdate:modelValue":U[1]||(U[1]=S=>x.value.ozon=S),options:[{id:"activate",name:"Синхронизировать OZON"},{id:"deactivate",name:"Рассинхронизировать OZON"}],"option-label":"name","option-value":"id",multiple:!1,clearable:"",dense:"","emit-value":"","map-options":"",outlined:"","use-chips":""},null,8,["modelValue"])]),_:1}),x.value.ozon?(s(),c("div",po,k(x.value.ozon.name),1)):b("",!0)])])])]),_:1}),o(ol,{inset:""}),o(X),o(ue,{align:"right"},{default:a(()=>[o(ne),o(V,{color:"green",label:"OK",type:"submit",unelevated:""}),Q(o(V,{color:"red",label:"Отмена",unelevated:""},null,512),[[q]])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},mo=de(_o,[["__scopeId","data-v-af622e37"]]);const L=h=>(te("data-v-d67417ee"),h=h(),se(),h),vo=L(()=>n("h5",{class:"text-center"},"Disable/Approve маркетплейсы",-1)),fo={class:"row"},bo={class:"col text-center"},go=L(()=>n("strong",null,"Изменение статуса для Wildberries",-1)),wo={class:"flex justify-evenly q-mt-lg"},ko=L(()=>n("div",{class:"q-mt-md q-card--bordered"},null,-1)),ho=L(()=>n("br",null,null,-1)),yo={class:"row"},xo={class:"col text-center"},Vo=L(()=>n("strong",null,"Изменение статуса для ОЗОН",-1)),$o={class:"flex justify-evenly q-mt-lg"},Co=L(()=>n("div",{class:"q-mt-md q-card--bordered"},null,-1)),zo={__name:"ToggleDisabledDialog",emits:[...M.emits],setup(h){_(0),_(0),_("increase"),_("increase"),_("percentage"),_("percentage"),_("price_retail"),_("price_retail");const{dialogRef:x,onDialogHide:C,onDialogOK:$,onDialogCancel:O}=M();function d(I,z){$({disable:I,field:z})}return(I,z)=>(s(),g(ae,{ref_key:"dialogRef",ref:x,onHide:A(C)},{default:a(()=>[o(Y,{class:"dialog q-pa-lg"},{default:a(()=>[vo,o(pe,{onSubmit:d},{default:a(()=>[o(X,{class:"q-gutter-md"},{default:a(()=>[n("div",fo,[n("div",bo,[go,n("div",wo,[o(V,{color:"yellow",class:"text-black",onClick:z[0]||(z[0]=U=>d(1,"wb"))},{default:a(()=>[m("Приостановить")]),_:1}),o(V,{color:"green",onClick:z[1]||(z[1]=U=>d(0,"wb"))},{default:a(()=>[m("Вернуть")]),_:1})]),ko])]),ho,n("div",yo,[n("div",xo,[Vo,n("div",$o,[o(V,{color:"yellow",class:"text-black",onClick:z[2]||(z[2]=U=>d(1,"ozon"))},{default:a(()=>[m("Приостановить")]),_:1}),o(V,{color:"green",onClick:z[3]||(z[3]=U=>d(0,"ozon"))},{default:a(()=>[m("Вернуть")]),_:1})]),Co])])]),_:1}),o(ue,{align:"right"},{default:a(()=>[o(ne),Q(o(V,{color:"red",label:"Отмена",unelevated:""},null,512),[[q]])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Oo=de(zo,[["__scopeId","data-v-d67417ee"]]);const al=h=>(te("data-v-b5750c58"),h=h(),se(),h),Do=al(()=>n("h5",null,"Найден на маркетплейсе",-1)),Uo={key:1,class:"text-center"},Qo=al(()=>n("h5",null,"Не найден на маркетплейсе",-1)),qo={__name:"IsOnMarketPlace",props:["response","prop_id"],setup(h){const x=h,{dialogRef:C,onDialogOK:$,onDialogHide:O}=M();function d(){$({sync:!1})}function I(){$({sync:!0})}return(z,U)=>(s(),g(ae,{ref_key:"dialogRef",ref:C,onHide:A(O)},{default:a(()=>[o(Y,{class:"dialog text-center q-pa-lg"},{default:a(()=>{var S;return[x.response.offer_id?(s(),c(w,{key:0},[Do,n("h6",null,"Offer id: "+k((S=x.response)==null?void 0:S.offer_id),1),o(V,{onClick:I,color:"blue"},{default:a(()=>[m("Синхронизировать")]),_:1})],64)):b("",!0),x.response.not_found?(s(),c("div",Uo,[Qo,n("div",null,[o(V,{onClick:d,color:"blue"},{default:a(()=>[m("Создать")]),_:1})])])):b("",!0)]}),_:1})]),_:1},8,["onHide"]))}},Io=de(qo,[["__scopeId","data-v-b5750c58"]]),Po={class:"q-mt-lg text-bold text-center"},Bo={class:"text-bold text-center"},So={class:"text-red"},No={class:"text-green"},Ko={key:0,class:"q-mb-sm row justify-between"},Wo={class:"col-9"},Zo={key:0,class:"col-3 text-right"},Ho={class:""},Ro={class:"text-red cursor-pointer"},jo={key:1,class:"text-right"},To={key:0,class:"row justify-center"},Ao=n("span",null,"  /  ",-1),Mo={class:"text-red text cursor-pointer"},Fo={key:1,class:"row justify-center"},Eo={key:1,class:"error--text text-no-wrap"},Lo={key:1,class:"error--text text-no-wrap"},Go=["href"],Jo=["href"],Xo={key:1,class:"error--text text-no-wrap"},Yo={key:1,class:"error--text text-no-wrap"},ea=["href"],la={class:"flex flex-center"},oa={class:"flex flex-center"},ha={__name:"Props",setup(h){const x=hl(),C=yl(),$=xl("auth"),O=_(),d=_({}),I=_(),z=_(),U=_(),S=_(),ee=_(),le=_(),R=_(),v=_(),f=_(),_e=_(),y=async t=>{u.show();try{const l=await axios.get("/api/props",{params:{...d.value,page:t,orderBy:I.value,orderDirection:z.value}}),{data:i,meta:p}=l.data;O.value=i,U.value=p.total_props,S.value=p.total_codes,ee.value=p.sum_amounts,le.value=p.sum_defective,R.value=p.reserved_orders,ie.value=p.last_page,j.value=p.current_page,sl.value=p.total,console.log(O),il()}catch(l){console.error(l)}u.hide()};Vl(()=>{C.name=="Props"&&y()});const ie=_(0),j=_(0),tl=_({}),sl=_(0);_("props_filter_v1"),$l(j,(t,l)=>{t!==l&&y(t)});const nl={rowsNumber:50},dl=()=>{d.value={...tl.value},j.value=1,y()},me=async(t,l)=>{u.show(),await axios.post("api/props/toggle-active",{id:t.id,field:l}).then(i=>{t.active=!t.active,u.hide()}).catch(function(i){console.log(i),u.hide()}),u.hide()},ve=async(t,l)=>{u.show(),await axios.post("api/props/toggle-disabled",{barcodes:[t.barcode],field:[l]}).then(i=>{t.disabled=!t.disabled,u.hide()}).catch(function(i){console.log(i),u.hide()}),u.hide()},rl=()=>{T.create({component:Oo}).onOk(async t=>{u.show();try{await axios.post("/api/props/toggle-disabled",{disable:t.disable,field:[t.field],filter:d.value}).then(l=>{const i=t.disable?"выключены":"включены",p=t.field=="wb"?"ВБ":"ОЗОН";oe.create({message:`Товары ${i} на ${p}`,color:"green"})})}catch(l){console.log(l),u.hide()}u.hide()})},il=async()=>{u.show();const{data:t}=await axios.get("/api/product_categories");v.value=t.data,u.hide()},fe=async(t,l)=>{u.show(),await axios.post("/api/props/toggleApproved",{product:t,approved:l}),await y(),u.hide()},cl=t=>{u.show(),axios.get("/api/products/wb/post/"+t).then(l=>{console.log(l),oe.create({message:l.data,color:"green"}),u.hide()}).catch(l=>{console.log(l),u.hide()}),u.hide()},E=[{label:"Фото",name:"image",field:"image",sortable:!1},{label:"Название",name:"product.name",field:t=>{var l;return(l=t.product)==null?void 0:l.name},sortable:!1},{label:"Артикул",name:"product.code",field:t=>{var l;return(l=t.product)==null?void 0:l.code},sortable:!1},{label:"Штрихкод",name:"barcode",field:"barcode",sortable:!1},{label:"Размер",name:"size",field:"size",sortable:!1},{label:"Цвет",name:"color",field:"color",sortable:!1},{label:"Чистый остаток / Брак",name:"amount",field:"amount",sortable:!1,align:"left"},{label:"Карточка WB",name:"wb_chrt_id",field:t=>{var l;return(l=t.wb_prop)==null?void 0:l.chrt_id},sortable:!1},{label:"Карточка ОЗОН",name:"ozon_code",field:"ozon_code",sortable:!1},{label:"Магазин",name:"amounts",field:"amounts",sortable:!1},{label:"Розничная цена",name:"product.price.price_base",field:t=>{var l,i;return(i=(l=t.product)==null?void 0:l.price)==null?void 0:i.price_retail},sortable:!1},{label:"Цена для мп",name:"product.price.price_marketplace",field:t=>{var l,i;return(i=(l=t.product)==null?void 0:l.price)==null?void 0:i.price_marketplace},sortable:!1},{label:"Цена WB",name:"product.price.price_wb",field:t=>{var l,i;return(i=(l=t.product)==null?void 0:l.price)==null?void 0:i.price_wb},sortable:!1},{label:"Цена OZON",name:"product.price.price_ozon",field:t=>{var l,i;return(i=(l=t.product)==null?void 0:l.price)==null?void 0:i.price_ozon},sortable:!1},{label:"Скидка",name:"sale",field:"sale",sortable:!1}];if($){const t=E.findIndex(i=>i.name==="ozon_code"),l=E.findIndex(i=>i.name==="wb_chrt_id");E.splice(t+1,0,{label:"ozon_disabled",name:"ozon_disabled",field:i=>{var p;return(p=i.ozon_prop)==null?void 0:p.disabled},sortable:!1}),E.splice(l+1,0,{label:"wb_disabled",name:"wb_disabled",field:i=>{var p;return(p=i.wb_prop)==null?void 0:p.disabled},sortable:!1}),E.push({label:"Действия",name:"actions",field:"actions",sortable:!1})}const ul=t=>{T.create({component:Ql,componentProps:{price:t}}).onOk(async l=>{try{await axios.put(`/api/prices/${t.id}`,l),y()}catch(i){console.error(i)}})},pl=(t,l)=>{T.create({component:ql,componentProps:{product:t,props:t.props,prop:{label:`${l==null?void 0:l.color} ${l==null?void 0:l.size}`,prop:l}}}).onOk(async i=>{u.show;try{await axios.post("/api/defective",i).then(p=>{console.log(p.data)}),y()}catch(p){console.log(p),u.hide()}u.hide()})},_l=()=>{T.create({component:mo}).onOk(async t=>{u.show();try{t.filter=d.value,console.log(t),await axios.patch("/api/group-sync",t).then(l=>{console.log(l.data),y()})}catch(l){console.log(l),u.hide()}u.hide()})},ml=()=>{T.create({component:eo}).onOk(async t=>{u.show();try{t.filter=d.value,await axios.patch("/api/group-prices",t).then(l=>{y()}).catch(function(l){})}catch{u.hide()}u.hide()})},vl=t=>{T.create({component:Il,componentProps:{imageUrl:t}})},fl=()=>{f.value.click()},bl=async t=>{const l=f.value.files[0],i=new FormData;i.append("file",l),u.show();try{await axios.post("/api/excel/import",i,{headers:{"Content-Type":"multipart/form-data"}}).then(p=>{_e.value=p.data.changedPrices}).catch(function(p){console.log(p)})}catch{u.hide()}t.target.value="",u.hide()},gl=async()=>{u.show();try{axios.get("/excel-export",{responseType:"arraybuffer",params:{...d.value,orderBy:I.value,orderDirection:z.value}}).then(t=>{const i=new Date().toLocaleString("en-GB",{hour12:!1}).replace(/\//g,".");console.log(t);const p=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e=document.createElement("a");e.href=window.URL.createObjectURL(p),e.download=`export-props-${i}.xlsx`,e.click()}).catch(function(t){console.log(t)}),u.hide()}catch(t){console.log(t)}u.hide()},wl=async t=>{try{u.show();const l=await axios.get(`/api/ozon/find-prop/${t}`);u.hide(),T.create({component:Io,componentProps:{response:l.data,prop_id:t}}).onOk(i=>{if(u.show(),i.sync)axios.get(`/api/ozon/sync-prop/${t}`).then(p=>{p.data.success?(oe.create({message:"Синхронизировано",color:"green"}),y()):oe.create({message:"Проблемы с получением товара с Озона",color:"red"})});else{const p=x.resolve(`/ozon/create/${t}`);window.open(p.href,"_blank")}u.hide()})}catch(l){console.log(l)}};return(t,l)=>{var p;const i=Cl("router-link");return s(),c(w,null,[o(Y,null,{default:a(()=>[o(X,{class:"row q-gutter-sm justify-between items-start"},{default:a(()=>[o(B,{class:"col-1",modelValue:d.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value.name=e),clearable:"",dense:"","hide-details":"",label:"Название товара",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(B,{class:"col-1",modelValue:d.value.code,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value.code=e),clearable:"",dense:"","hide-details":"",label:"Артикул",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(B,{class:"col-1",modelValue:d.value.size,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value.size=e),clearable:"",dense:"","hide-details":"",label:"Размер",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(B,{class:"col-1",modelValue:d.value.color,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value.color=e),clearable:"",dense:"","hide-details":"",label:"Цвет",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(B,{class:"col-1",modelValue:d.value.design,"onUpdate:modelValue":l[4]||(l[4]=e=>d.value.design=e),clearable:"",dense:"","hide-details":"",label:"Конструкция",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(H,{class:"col-1",modelValue:d.value.categories,"onUpdate:modelValue":l[5]||(l[5]=e=>d.value.categories=e),options:v.value,"option-label":"name","option-value":"id",label:"Категория",clearable:"",dense:"","emit-value":"","map-options":"",multiple:"",outlined:"","use-chips":""},null,8,["modelValue","options"]),o(B,{class:"col-1",modelValue:d.value.barcode,"onUpdate:modelValue":l[6]||(l[6]=e=>d.value.barcode=e),clearable:"",dense:"","hide-details":"",label:"Штрихкод",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(B,{class:"col-1",modelValue:d.value.wb_nm_id,"onUpdate:modelValue":l[7]||(l[7]=e=>d.value.wb_nm_id=e),clearable:"",dense:"","hide-details":"",label:"WB nm_id",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(B,{class:"col-1",modelValue:d.value.ozon_sku,"onUpdate:modelValue":l[8]||(l[8]=e=>d.value.ozon_sku=e),clearable:"",dense:"","hide-details":"",label:"OZON FBS SKU",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(B,{class:"col-1",modelValue:d.value.ozon_code,"onUpdate:modelValue":l[9]||(l[9]=e=>d.value.ozon_code=e),clearable:"",dense:"","hide-details":"",label:"OZON CODE",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(B,{class:"col-1",modelValue:d.value.ozon_id,"onUpdate:modelValue":l[10]||(l[10]=e=>d.value.ozon_id=e),clearable:"",dense:"","hide-details":"",label:"OZON PRODUCT ID",outlined:"",onKeypress:N(y,["enter"])},null,8,["modelValue"]),o(H,{class:"col-1",modelValue:d.value.img,"onUpdate:modelValue":l[11]||(l[11]=e=>d.value.img=e),options:[{id:"code_has_no_images",name:"Нет фото у артикула"},{id:"code_has_images",name:"Есть фото у артикула"},{id:"prop_has_no_images",name:"Нет фото у характеристики"},{id:"prop_has_images",name:"Есть фото у характеристики"}],"option-label":"name","option-value":"id",label:"Фото",clearable:"",dense:"","emit-value":"","map-options":"",multiple:"",outlined:"","use-chips":""},null,8,["modelValue"]),o(H,{class:"col-1",modelValue:d.value.shop_id,"onUpdate:modelValue":l[12]||(l[12]=e=>d.value.shop_id=e),options:[{id:"1",name:"(1) Анапа"},{id:"2",name:"(2) КП"},{id:"3",name:"(3) Галактика"},{id:"4",name:"(4) Армавир"},{id:"5",name:"(5) Мега"},{id:"6",name:"(6) Галерея"},{id:"7",name:"(7) Виртуальный склад Wildberries"},{id:"8",name:"(8) Склад резерва"}],"option-label":"name","option-value":"id",label:"Магазин",clearable:"",dense:"","emit-value":"","map-options":"",multiple:"",outlined:"","use-chips":""},null,8,["modelValue"]),o(H,{class:"col-1",modelValue:d.value.amount,"onUpdate:modelValue":l[13]||(l[13]=e=>d.value.amount=e),options:[{id:"hasamount",name:"Есть в наличии"},{id:"hasnotamount",name:"Нет в наличии"}],"option-label":"name","option-value":"id",label:"Наличие",clearable:"",dense:"","emit-value":"","map-options":"",multiple:"",outlined:"","use-chips":""},null,8,["modelValue"]),o(H,{class:"col-1",modelValue:d.value.mp,"onUpdate:modelValue":l[14]||(l[14]=e=>d.value.mp=e),options:[{id:"wb",name:"Есть на WB"},{id:"ozon",name:"Есть на OZON"},{id:"both",name:"Есть на ОБОИХ МП"},{id:"empty_wb",name:"Нет на WB"},{id:"empty_ozon",name:"Нет на OZON"},{id:"empty_both",name:"НЕТ на ОБОИХ МП"}],"option-label":"name","option-value":"id",label:"Маркетплейс",clearable:"",dense:"","emit-value":"","map-options":"",multiple:"",outlined:"","use-chips":""},null,8,["modelValue"]),o(H,{class:"col-1",modelValue:d.value.sync,"onUpdate:modelValue":l[15]||(l[15]=e=>d.value.sync=e),options:[{id:"notchecked",name:"Не проверены Аней"},{id:"approved",name:"Одобрены Аней"},{id:"notapproved",name:"Не одобрены Аней"},{id:"wb_active",name:"Продаются на WB (одобренные)"},{id:"wb_notactive",name:"Не продаются WB (одобренные)"},{id:"ozon_active",name:"Продаются OZON (одобренные)"},{id:"ozon_notactive",name:"Не продаются OZON (одобренные)"}],"option-label":"name","option-value":"id",label:"Выгрузка",clearable:"",dense:"","emit-value":"","map-options":"",multiple:"",outlined:"","use-chips":""},null,8,["modelValue"]),o(H,{class:"col-1",modelValue:d.value.price,"onUpdate:modelValue":l[16]||(l[16]=e=>d.value.price=e),options:[{id:"has_price",name:"Есть цена сильвано"},{id:"doesnt_have_price",name:"Нет цены сильвано"}],"option-label":"name","option-value":"id",label:"Цены Сильвано",clearable:"",dense:"","emit-value":"","map-options":"",multiple:"",outlined:"","use-chips":""},null,8,["modelValue"]),o(ne),A($)?(s(),g(el,{key:0,color:"primary",label:""},{default:a(()=>[o(J,null,{default:a(()=>[Q((s(),g(K,{clickable:"",onClick:ml},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[m("Изменить цены")]),_:1})]),_:1})]),_:1})),[[q]]),Q((s(),g(K,{clickable:"",onClick:_l},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[m("Синохронизация маркетплейсов")]),_:1})]),_:1})]),_:1})),[[q]]),Q((s(),g(K,{clickable:"",onClick:rl},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[m("Приостановить/Вернуть товары на маркетплейсы")]),_:1})]),_:1})]),_:1})),[[q]])]),_:1})]),_:1})):b("",!0),o(V,{color:"green",outlined:"",onClick:y},{default:a(()=>[m("Искать")]),_:1}),o(V,{color:"red",outlined:"",onClick:dl},{default:a(()=>[m("Сбросить")]),_:1}),A($)?(s(),g(V,{key:1,color:"orange",outlined:"",onClick:gl},{default:a(()=>[m("Экспорт")]),_:1})):b("",!0),A($)?(s(),g(V,{key:2,color:"blue",outlined:"",onClick:fl},{default:a(()=>[m("Импорт")]),_:1})):b("",!0),n("input",{class:"hidden",type:"file",ref_key:"fileInput",ref:f,onChange:bl},null,544)]),_:1})]),_:1}),(p=O.value)!=null&&p.length?(s(),c(w,{key:0},[n("div",Po," Всего характеристик: "+k(U.value)+" | Всего артикулов: "+k(S.value)+" | Сумма всех остатков: "+k(ee.value)+" | ",1),n("div",Bo,[n("span",So," Сумма брака: "+k(le.value),1),m(" | "),n("span",No," Товары в резерве: "+k(R.value),1)]),o(Dl,{columns:E,pagination:nl,rows:O.value,dense:"","hide-bottom":"","row-key":"id",title:"Характеристики","virtual-scroll":"","wrap-cells":"",class:"q-mt-md"},{"body-cell":a(e=>[o(Ul,{class:Xe(e.row.is_wrong?"bg-red-2":e.row.is_validated?"bg-green-2":""),item:e},{default:a(()=>{var be,ge,we,ke,he,ye,xe,Ve,$e,Ce,ze,Oe,De,Ue,Qe,qe,Ie,Pe,Be,Se,Ne,Ke,We,Ze,He,Re,je,Te,Ae,Me,Fe,Ee,Le,Ge;return[e.col.name=="image"?(s(),c(w,{key:0},[((ge=(be=e.row)==null?void 0:be.image)==null?void 0:ge.src)!=null?(s(),g(zl,{key:0,class:"cursor-pointer",onClick:r=>{var D,G;return vl((G=(D=e.row)==null?void 0:D.image)==null?void 0:G.src)},src:(ke=(we=e.row)==null?void 0:we.image)==null?void 0:ke.src},null,8,["onClick","src"])):b("",!0)],64)):e.col.name=="amounts"?(s(),c(w,{key:1},[((ye=(he=e.row)==null?void 0:he.amounts)==null?void 0:ye.length)>0?(s(),g(J,{key:0,class:""},{default:a(()=>[o(Ol,{"dense-toggle":"",label:"Остатки"},{default:a(()=>[(s(!0),c(w,null,Ye(e.row.amounts,(r,D)=>{var G,Je;return s(),c(w,{key:D},[r!=null&&r.amount?(s(),c("div",Ko,[n("div",Wo,k((G=r==null?void 0:r.shop)==null?void 0:G.name),1),r!=null&&r.defective?(s(),c("div",Zo,[n("span",Ho,k(r==null?void 0:r.amount),1),m(" / "),n("u",Ro,k(r==null?void 0:r.defective),1),o(ce,{anchor:"top middle",self:"center middle"},{default:a(()=>[n("div",null,k(r==null?void 0:r.comment),1)]),_:2},1024)])):(s(),c("div",jo,[n("span",null,k(r==null?void 0:r.amount),1)]))])):b("",!0),D!==((Je=e.row.amounts)==null?void 0:Je.length)-1?(s(),g(ol,{key:1})):b("",!0)],64)}),128))]),_:2},1024)]),_:2},1024)):b("",!0)],64)):e.col.name=="amount"?(s(),c(w,{key:2},[e.row.amounts.filter(r=>r.defective).length?(s(),c("div",To,[n("div",null,k(e.row.amounts.reduce((r,D)=>r+D.amount,0)-e.row.amounts.reduce((r,D)=>r+D.defective,0)),1),Ao,n("div",Mo,[n("u",null,k(e.row.amounts.reduce((r,D)=>r+D.defective,0)),1),o(ce,{anchor:"top middle",self:"center middle"},{default:a(()=>[(s(!0),c(w,null,Ye(e.row.amounts,r=>(s(),c("div",null,k(r.comment),1))),256))]),_:2},1024)])])):(s(),c("div",Fo,k(e.row.amounts.reduce((r,D)=>r+D.amount,0)),1))],64)):e.col.name=="wb_active"?(s(),c(w,{key:3},[e.row.wb_prop?(s(),g(V,{key:0,color:e.row.wb_prop.active==1?"green-4":"red-4",outlined:"",text:"",onClick:r=>me(e.row.wb_prop,"wb")},{default:a(()=>[e.row.wb_prop.active==1?(s(),c(w,{key:0},[m(" Активен ")],64)):(s(),c(w,{key:1},[m(" Не активен ")],64))]),_:2},1032,["color","onClick"])):b("",!0),e.row.wb_prop==null?(s(),c("div",Eo,"Нет на WB")):b("",!0)],64)):e.col.name=="wb_disabled"?(s(),c(w,{key:4},[e.row.wb_prop?(s(),g(V,{key:0,color:e.row.wb_prop.disabled==1?"yellow-4 text-black":"blue-4",outlined:"",text:"",onClick:r=>ve(e.row.wb_prop,"wb")},{default:a(()=>[e.row.wb_prop.disabled==1?(s(),c(w,{key:0},[m(" Приостановлен ")],64)):(s(),c(w,{key:1},[m(" Продается ")],64))]),_:2},1032,["color","onClick"])):b("",!0),e.row.wb_prop==null?(s(),c("div",Lo,"Нет на WB")):b("",!0)],64)):e.col.name=="wb_nm_id"?(s(),c(w,{key:5},[(Ve=(xe=e.row)==null?void 0:xe.wb_prop)!=null&&Ve.nm_id?(s(),c("a",{key:0,target:"_blank",href:"https://www.wildberries.ru/catalog/"+((Ce=($e=e.row)==null?void 0:$e.wb_prop)==null?void 0:Ce.nm_id)+"/detail.aspx?targetUrl=GP"},k((ze=e.row)==null?void 0:ze.wb_prop.nm_id),9,Go)):b("",!0)],64)):e.col.name=="wb_chrt_id"?(s(),c(w,{key:6},[(De=(Oe=e.row)==null?void 0:Oe.wb_prop)!=null&&De.chrt_id?(s(),c("a",{key:0,target:"_blank",href:"https://www.wildberries.ru/catalog/"+((Qe=(Ue=e.row)==null?void 0:Ue.wb_prop)==null?void 0:Qe.nm_id)+"/detail.aspx?targetUrl=GP&size="+((Ie=(qe=e.row)==null?void 0:qe.wb_prop)==null?void 0:Ie.chrt_id)},k((Be=(Pe=e.row)==null?void 0:Pe.wb_prop)==null?void 0:Be.chrt_id),9,Jo)):b("",!0)],64)):e.col.name=="ozon_active"?(s(),c(w,{key:7},[e.row.ozon_prop?(s(),g(V,{key:0,color:e.row.ozon_prop.active==1?"green-4":"red-4",outlined:"",text:"",onClick:r=>me(e.row.ozon_prop,"ozon")},{default:a(()=>[e.row.ozon_prop.active==1?(s(),c(w,{key:0},[m(" Активен ")],64)):(s(),c(w,{key:1},[m(" Не активен ")],64))]),_:2},1032,["color","onClick"])):b("",!0),e.row.ozon_prop==null?(s(),c("span",Xo,"Нет на OZON")):b("",!0)],64)):e.col.name=="ozon_disabled"?(s(),c(w,{key:8},[e.row.ozon_prop?(s(),g(V,{key:0,color:e.row.ozon_prop.disabled==1?"yellow-4 text-black":"blue-4",outlined:"",text:"",onClick:r=>ve(e.row.ozon_prop,"ozon")},{default:a(()=>[e.row.ozon_prop.disabled==1?(s(),c(w,{key:0},[m(" Приостановлен ")],64)):(s(),c(w,{key:1},[m(" Продается ")],64))]),_:2},1032,["color","onClick"])):b("",!0),e.row.ozon_prop==null?(s(),c("span",Yo,"Нет на OZON")):b("",!0)],64)):e.col.name=="ozon_code"?(s(),c(w,{key:9},[(Ne=(Se=e.row)==null?void 0:Se.ozon_prop)!=null&&Ne.sku&&((We=(Ke=e.row)==null?void 0:Ke.ozon_prop)!=null&&We.ozon_id)?(s(),c("a",{key:0,target:"_blank",href:"https://ozon.ru/context/detail/id/"+((He=(Ze=e.row)==null?void 0:Ze.ozon_prop)==null?void 0:He.sku)},k((je=(Re=e.row)==null?void 0:Re.ozon_prop)==null?void 0:je.ozon_id),9,ea)):b("",!0)],64)):e.col.name=="product.price.price_retail"?(s(),c("span",{key:10,class:Xe((Me=_e.value)!=null&&Me.includes((Ae=(Te=e.row.product)==null?void 0:Te.price)==null?void 0:Ae.id)?"text-red":"text-black")},k((Ee=(Fe=e.row.product)==null?void 0:Fe.price)==null?void 0:Ee.price_retail),3)):e.col.name=="product.code"?(s(),g(i,{key:11,to:`/products/${(Ge=(Le=e.row)==null?void 0:Le.product)==null?void 0:Ge.id}`,class:"text-black q-btn rounded-borders cursor-pointer",style:{"text-decoration":"none"},tag:"span",target:"_blank"},{default:a(()=>{var r;return[m(k((r=e.row.product)==null?void 0:r.code),1)]}),_:2},1032,["to"])):e.col.name=="actions"?(s(),g(el,{key:12,color:"primary",label:""},{default:a(()=>[o(J,null,{default:a(()=>[e.row.product.approved==1?Q((s(),g(K,{key:0,clickable:"",onClick:r=>fe(e.row.product_id,0)},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[m("Удалить из одобренных")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[q]]):b("",!0),["Трусы","Бюстгальтер","Бюстье","Комплект"].some(r=>e.row.product.name.includes(r))?Q((s(),g(K,{key:1,clickable:"",onClick:r=>wl(e.row.id)},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[m("Искать товар на Озон")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[q]]):b("",!0),["Трусы","Бюстгальтер"].some(r=>e.row.product.name.includes(r))&&!e.row.wb_prop?Q((s(),g(K,{key:2,clickable:""},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[o(i,{to:`/wb/create/${e.row.id}`,class:"text-black",style:{"text-decoration":"none"},tag:"span",target:"_blank"},{default:a(()=>[m(" Создать карточку на ВБ ")]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[q]]):b("",!0),e.row.product.approved==0||e.row.product.approved===null?Q((s(),g(K,{key:3,clickable:"",onClick:r=>fe(e.row.product_id,1)},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[m("Добавить в одобренные")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[q]]):b("",!0),Q((s(),g(K,{clickable:"",onClick:r=>cl(e.row.product_id)},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[m("Отправить остатки на WB")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[q]]),Q((s(),g(K,{clickable:"",onClick:r=>{var D;return ul((D=e.row.product)==null?void 0:D.price)}},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[m("Изменить цены")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[q]]),Q((s(),g(K,{clickable:"",onClick:r=>pl(e.row.product,e.row)},{default:a(()=>[o(W,null,{default:a(()=>[o(Z,null,{default:a(()=>[m("Добавить брак")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[q]])]),_:2},1024)]),_:2},1024)):(s(),c(w,{key:13},[m(k(e.value),1)],64))]}),_:2},1032,["class","item"])]),_:1},8,["rows"]),n("div",la,[o(ll,{modelValue:j.value,"onUpdate:modelValue":l[17]||(l[17]=e=>j.value=e),max:ie.value,"max-pages":6,"boundary-links":"","boundary-numbers":"",class:"q-mt-md","direction-links":""},null,8,["modelValue","max"])]),n("div",oa,[o(ll,{modelValue:j.value,"onUpdate:modelValue":l[18]||(l[18]=e=>j.value=e),"boundary-links":!1,"direction-links":!1,max:ie.value,"max-pages":6,class:"q-mt-md",input:""},null,8,["modelValue","max"])])],64)):b("",!0)],64)}}};export{ha as default};
