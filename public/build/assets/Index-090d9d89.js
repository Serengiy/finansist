import{r as i,k as x,o as b,c as f,w,N as y,b as l,a as r,e as q,f as v}from"./app-90bf6a79.js";import{Q as V}from"./QSelect-4ea1f147.js";import{Q as h}from"./QPage-3662eeea.js";import{_ as B}from"./RulesTable-2098aeec.js";import"./QTable-ca0f14f3.js";import"./QPagination-de6aaaf7.js";const I={class:"bg-white q-ma-sm q-pa-sm"},N={class:"bg-white shadow-3 q-px-sm rounded-borders q-pb-md"},P={class:"row"},Q={class:"row q-mt-sm q-ml-sm"},z={__name:"Index",setup(C){const u=i([]),s=i({page:1,rowsPerPage:20,rowsNumber:0}),t=i({purpose_expression:"",operation_type:null}),n=async()=>{var p,e,a,d,m,c,g,_;try{const o=await axios.get("/api/rules",{params:{load:["category,contractor"],paginate:s.value.rowsPerPage,page:s.value.page,purpose_expression:t.value.purpose_expression,operation_type:(p=t.value.operation_type)==null?void 0:p.value}});s.value.rowsNumber=(a=(e=o.data)==null?void 0:e.meta)==null?void 0:a.total,s.value.page=(m=(d=o.data)==null?void 0:d.meta)==null?void 0:m.current_page,s.value.totalPages=(g=(c=o.data)==null?void 0:c.meta)==null?void 0:g.last_page,u.value=(_=o==null?void 0:o.data)==null?void 0:_.data,console.log(o.data.data)}catch{y.create({message:"Ошибка получения данных",color:"red",timeout:2e3})}};return x(()=>{n()}),(p,e)=>(b(),f(h,{class:"bg-grey-2"},{default:w(()=>[l("div",I,[l("div",N,[e[3]||(e[3]=l("p",{class:"text-h6 text-center"}," Правила операций ",-1)),l("div",P,[r(q,{class:"col-3 q-px-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:t.value.purpose_expression,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.purpose_expression=a),label:"Регулярное выражение"},null,8,["modelValue"]),r(V,{class:"col-3 q-px-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:t.value.operation_type,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.operation_type=a),label:"Тип операции",options:[{label:"DEBIT",value:"DEBIT"},{label:"CREDIT",value:"CREDIT"}]},null,8,["modelValue"])]),l("div",Q,[r(v,{class:"text-right",dense:"",size:"sm",onClick:n,label:"Применить фильтры",color:"primary"}),r(v,{class:"text-right q-ml-sm",dense:"",size:"sm",to:{name:"CreateRule"},label:"Создать правило",color:"primary"})])]),r(B,{rules:u.value,pagination:s.value,"onUpdate:pagination":e[2]||(e[2]=a=>{s.value=a,n()}),onRefresh:n},null,8,["rules","pagination"])])]),_:1}))}};export{z as default};
