import{a as d,Q as k}from"./QTable-9f10ca35.js";import{z as x,y as Q,r as B,L as P,o as p,c as _,w as o,q as u,d as z,a as n,v as m,t as g,n as C,F as N,i as V,P as f}from"./app-64dafc3a.js";import{Q as w}from"./QPage-18703bb0.js";import"./QSelect-fcdeceb1.js";import"./QChip-18101fab.js";import"./position-engine-f936ecea.js";const D={class:"q-mt-lg"},S={__name:"Defective",setup(F){const v=x("auth");Q();const i=B(),h=async()=>{f.show();try{axios.get("/api/defective/").then(e=>{i.value=e.data.data})}catch(e){console.error("Ошибка получения данных о продукте:",e)}f.hide()};P(()=>{h()});const y=e=>{f.show();try{axios.patch("/api/remove-defective",{amount_id:e}).then(l=>{h()})}catch(l){console.log(l)}f.hide()},b=[{label:"Магазизин",name:"shop",field:"shop",sortable:!1,align:"left"},{label:"Артикул",name:"code",field:e=>{var l,a;return(a=(l=e==null?void 0:e.prop)==null?void 0:l.product)==null?void 0:a.code},sortable:!1,align:"left"},{label:"Цвет",name:"color",field:e=>{var l;return(l=e==null?void 0:e.prop)==null?void 0:l.color},sortable:!1,align:"left"},{label:"Размер",name:"size",field:e=>{var l;return(l=e==null?void 0:e.prop)==null?void 0:l.size},sortable:!1,align:"left"},{label:"Штрихкод",name:"barcode",field:"barcode",sortable:!1,align:"left"},{label:"Комментарий",name:"comment",field:"comment",sortable:!1,align:"left"},{label:"Кол-во брака",name:"amount",field:"defective",sortable:!1,align:"left"}];return v&&b.push({label:"Удалить из брака",name:"remove"}),(e,l)=>i.value?(p(),_(w,{key:0},{default:o(()=>[z("div",D,[n(k,{rows:i.value,columns:b,pagination:{rowsPerPage:25},dense:"","row-key":"id","virtual-scroll":"","wrap-cells":""},{"body-cell-shop":o(a=>[n(d,null,{default:o(()=>{var s,t;return[(t=(s=a.row)==null?void 0:s.shop)!=null&&t.name?(p(),_(d,{key:0},{default:o(()=>{var r,c;return[m(g((c=(r=a.row)==null?void 0:r.shop)==null?void 0:c.name),1)]}),_:2},1024)):u("",!0)]}),_:2},1024)]),"body-cell-prop":o(a=>[n(d,{props:a},{default:o(()=>{var s,t,r,c;return[(t=(s=a==null?void 0:a.row)==null?void 0:s.prop)!=null&&t.color?(p(),C(N,{key:0},[m(g((c=(r=a==null?void 0:a.row)==null?void 0:r.prop)==null?void 0:c.color),1)],64)):u("",!0)]}),_:2},1032,["props"])]),"body-cell-remove":o(a=>[n(d,{class:"text-right"},{default:o(()=>[n(V,{size:"sm",outlined:"",color:"red",onClick:s=>y(a.row.id)},{default:o(()=>[m("Удалить")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["rows"])])]),_:1})):u("",!0)}};export{S as default};
