import{r as i,o as x,b,c as f,d as y,N as w,h as l,g as r,Q as q,i as v}from"./app-709df95d.js";import{Q as h}from"./QSelect-38babbb6.js";import{Q as V}from"./QPage-aa58c21f.js";import{_ as Q}from"./RulesTable-80351062.js";import"./QTable-b060046c.js";import"./QPagination-965ff517.js";const B={class:"bg-white q-ma-sm q-pa-sm"},I={class:"bg-white shadow-3 q-px-sm rounded-borders q-pb-md"},N={class:"row"},P={class:"row q-mt-sm q-ml-sm"},z={__name:"Index",setup(C){const u=i([]),s=i({page:1,rowsPerPage:20,rowsNumber:0}),t=i({purpose_expression:"",operation_type:null}),n=async()=>{var p,e,a,d,m,c,g,_;try{const o=await axios.get("/api/rules",{params:{load:["category,contractor"],paginate:s.value.rowsPerPage,page:s.value.page,purpose_expression:t.value.purpose_expression,operation_type:(p=t.value.operation_type)==null?void 0:p.value}});s.value.rowsNumber=(a=(e=o.data)==null?void 0:e.meta)==null?void 0:a.total,s.value.page=(m=(d=o.data)==null?void 0:d.meta)==null?void 0:m.current_page,s.value.totalPages=(g=(c=o.data)==null?void 0:c.meta)==null?void 0:g.last_page,u.value=(_=o==null?void 0:o.data)==null?void 0:_.data,console.log(o.data.data)}catch{w.create({message:"Ошибка получения данных",color:"red",timeout:2e3})}};return x(()=>{n()}),(p,e)=>(b(),f(V,{class:"bg-grey-2"},{default:y(()=>[l("div",B,[l("div",I,[e[3]||(e[3]=l("p",{class:"text-h6 text-center"}," Правила операций ",-1)),l("div",N,[r(q,{class:"col-3 q-px-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:t.value.purpose_expression,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.purpose_expression=a),label:"Регулярное выражение"},null,8,["modelValue"]),r(h,{class:"col-3 q-px-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:t.value.operation_type,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.operation_type=a),label:"Тип операции",options:[{label:"DEBIT",value:"DEBIT"},{label:"CREDIT",value:"CREDIT"}]},null,8,["modelValue"])]),l("div",P,[r(v,{class:"text-right",dense:"",size:"sm",onClick:n,label:"Применить фильтры",color:"primary"}),r(v,{class:"text-right q-ml-sm",dense:"",size:"sm",to:{name:"CreateRule"},label:"Создать правило",color:"primary"})])]),r(Q,{rules:u.value,pagination:s.value,"onUpdate:pagination":e[2]||(e[2]=a=>{s.value=a,n()}),onRefresh:n},null,8,["rules","pagination"])])]),_:1}))}};export{z as default};
