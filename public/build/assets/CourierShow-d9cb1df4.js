import{y as z,z as B,r as n,L as I,o as l,n as i,d as s,v as _,t as c,u as T,F as f,I as k,q as r,a as b,w,i as C,P as a,N as j,J as P,c as Q,g as E,ag as F}from"./app-64dafc3a.js";import{Q as A}from"./QFile-eeadd18b.js";import{_ as D}from"./ImageDialog-5fc91dda.js";import"./QChip-18101fab.js";import"./QTooltip-3ff6951b.js";import"./position-engine-f936ecea.js";import"./QImg-4607bda3.js";import"./ClosePopup-9fac0edc.js";import"./use-dialog-plugin-component-00e1baf8.js";const L={class:"q-pa-lg q-mb-xl"},U={class:"row justify-center"},J={key:0,class:"col-sm-9 bg-white q-pa-lg rounded"},O={class:"row"},R={class:"col-12 text-h5"},Y=s("b",null,"Номер отгрузки: ",-1),G={class:"col-12 text-h5"},H=s("b",null,"Количество товаров: ",-1),K={class:"row q-mt-lg justify-center"},M={class:"q-mt-lg"},W={key:0,class:"q-mt-xl"},X={class:"row justify-center"},Z={class:"text-h6"},ss=s("div",{class:"justify-center text-center"}," Акт Приема-передачи товара ",-1),es={class:"row q-my-md",style:{border:"1px solid lightgrey"}},ts=s("div",{class:"col-12 row",style:{"border-bottom":"1px solid lightgrey"}},[s("div",{class:"col-6 text-center q-py-sm",style:{"border-right":"1px solid lightgrey"}}," Клиент "),s("div",{class:"col-6 text-center q-py-sm"}," Перевозчик ")],-1),os={class:"col-12 row"},ls={class:"col-6 q-pa-md",style:{"border-right":"1px solid lightgrey"}},is={class:"col-6 q-pa-md"},cs={class:"q-px-md"},rs={class:"row q-mt-sm",style:{border:"1px solid lightgrey"}},ds={class:"col-12 row",style:{"border-bottom":"1px solid lightgrey"}},as={class:"col-4 q-pa-sm text-center",style:{"border-right":"1px solid lightgrey"}},ns=s("div",{class:"col-4 q-pa-sm text-center",style:{"border-right":"1px solid lightgrey"}}," Перевозчик ",-1),_s=s("div",{class:"col-4 q-pa-sm text-center"}," Получатель ",-1),hs=F('<div class="row col-12"><div class="col-4 row"><div class="col-4 text-center q-pt-xs" style="border-right:1px solid lightgrey;"> Место доставки товара </div><div class="col-4 text-center q-pt-xs" style="border-right:1px solid lightgrey;"> Кол-во мест к отправке, штук </div><div class="col-4 text-center q-pt-xs" style="border-right:1px solid lightgrey;"> Подпись </div></div><div class="col-4 row"><div class="col-6 text-center q-pt-xs" style="border-right:1px solid lightgrey;"> Принял кол-во Мест, штук </div><div class="col-6 text-center q-pt-xs" style="border-right:1px solid lightgrey;"> Подпись </div></div><div class="col-4 row"><div class="col-6 text-center q-pt-xs" style="border-right:1px solid lightgrey;"> Принял кол-во мест, штук </div><div class="col-6 text-center q-pt-xs"> Подпись </div></div></div>',1),us={class:"row col-12",style:{"border-top":"1px solid lightgrey"}},vs={class:"col-4 row"},gs=s("div",{class:"col-4",style:{"border-right":"1px solid lightgrey"}},null,-1),ps={class:"col-4 text-center",style:{"border-right":"1px solid lightgrey"}},ms=s("div",{class:"col-4",style:{"border-right":"1px solid lightgrey"}},null,-1),ys={class:"col-4 row"},xs={class:"col-6 text-center",style:{"border-right":"1px solid lightgrey"}},bs=s("div",{class:"col-6",style:{"border-right":"1px solid lightgrey"}},null,-1),ws=s("div",{class:"col-4 row",style:{"border-right":"1px lightgrey"}},[s("div",{class:"col-6 text-center",style:{"border-right":"1px solid lightgrey"}}),s("div",{class:"col-6"})],-1),qs=s("div",{class:"q-mt-md"}," Вышеперечисленные услуги выполнены полностью и в срок. Заказчик претензий по объёму, количеству и срокам оказания услуг не имеет. Настоящий Акт подписан в 3х экземплярах по одному для каждой из сторон. ",-1),fs={class:"row q-mt-md"},ks=s("div",{class:"col-2"}," Перевозчик ",-1),Cs={class:"col-4"},js={class:"row q-mt-md"},Vs=s("div",{class:"col-2"}," Клиент ",-1),$s=s("br",null,null,-1),Ns=s("br",null,null,-1),Ss={key:1,class:"row justify-center col-12 q-mt-xl"},zs={key:0,class:"row justify-center"},Bs={class:"text-center"},Is=s("p",{class:"text-h6"},"Штрихкод отгрузки",-1),Ts=["src"],Ps=s("div",{class:"col-xs-3 col-sm-3"},[s("p",null,[s("b",null,"Видео:")])],-1),Qs={key:1,class:"col-xs-9 col-sm-6"},Es=["src"],Fs={key:2,class:"col-xs-9 col-sm-6"},As={class:"row justify-center col-12"},Ds={key:0,class:"row q-mt-lg justify-center"},Ls={key:2,class:"row justify-center col-12 q-mt-lg"},Us=s("div",{class:"col-xs-3 col-sm-3"},[s("p",null,[s("b",null,"Статус:")])],-1),Js={class:"col-xs-9 col-sm-6"},Os={class:"q-card--bordered rounded-borders q-py-sm q-px-sm"},Rs={key:1,class:"col-sm-9"},Ys={class:"row justify-center"},Gs={class:"text-red"},ie={__name:"CourierShow",setup(Hs){const g=z(),h=g.params.consignmentId,V=g.params.taskId,p=B("user"),u=n(),v=n(null),m=n([]),o=n({video:null,isAllTaken:!1,stores:[],uploadedVideo:null,status:null}),y=n(),x=async()=>{a.show();try{const t=await axios.get(`/api/courier/${h}/ozon?task_id=${V}`);if(await t.data.error)v.value=await t.data.error;else{o.value=await t.data.consignment,y.value=await t.data.docs,u.value=await t.data.consignment.barcode;const d=Object.keys(y.value);m.value=d.map(e=>e),console.log(o.value)}}catch(t){console.error(t)}a.hide()},$=t=>{var d;console.log(t),a.show();try{axios.post(`/api/courier/user/${(d=p==null?void 0:p.value)==null?void 0:d.id}/accept/${h}/store/${t}/ozon`),x()}catch(e){console.log(e)}a.hide()},N=async()=>{a.show();try{(await axios.post(`/api/courier/${h}/ozon`,{data:o.value},{responseType:"arraybuffer",headers:{"Content-Type":"multipart/form-data"}})).status===201?(j.create({color:"green",message:"Видео загружено"}),x()):j.create({color:"red",message:"Проблемы с загрузкой видео"})}catch(t){console.log(t)}a.hide()},S=t=>{P.create({component:D,componentProps:{imageUrl:t}})};return I(()=>{g.name=="ConsignmentsCourierShow"&&x()}),(t,d)=>(l(),i("div",L,[s("div",U,[o.value&&!v.value?(l(),i("div",J,[s("div",O,[s("div",R,[Y,_(c(T(h)),1)]),s("div",G,[H,_(c(o.value.count),1)])]),m.value.includes(t.index)?r("",!0):(l(!0),i(f,{key:0},k(o.value.stores,(e,q)=>(l(),i("div",K,[m.value.includes(q)?r("",!0):(l(),Q(C,{key:0,color:"green",onClick:Ks=>$(q)},{default:w(()=>[_("Принять поставку "+c(e),1)]),_:2},1032,["onClick"]))]))),256)),(l(!0),i(f,null,k(y.value,e=>(l(),i("div",M,[e.carrier?(l(),i("div",W,[s("div",X,[s("p",Z," От "+c(e.date),1)]),ss,s("div",es,[ts,s("div",os,[s("div",ls,c(e.client),1),s("div",is,c(e.carrier),1)])]),s("div",cs,[_(" Основание: Договор на оказание услуг перевозки груза № "),s("span",null,c(e.doc_number),1)]),s("div",rs,[s("div",ds,[s("div",as," Отправитель "+c(e.store),1),ns,_s]),hs,s("div",us,[s("div",vs,[gs,s("div",ps,c(e.amount),1),ms]),s("div",ys,[s("div",xs,c(e.amount),1),bs]),ws])]),qs,s("div",fs,[ks,s("div",Cs," _____________ "+c(e.carrierSign),1)]),s("div",js,[Vs,s("div",null," _____________ "+c(e.EP),1)])])):r("",!0)]))),256)),$s,Ns,o.value.isAllTaken?(l(),i("div",Ss,[s("div",null,[u.value?(l(),i("div",zs,[s("div",Bs,[Is,s("div",{class:"rounded-borders bg-grey-2 q-pa-lg cursor-pointer",onClick:d[0]||(d[0]=e=>S(u.value))},[s("img",{src:u.value,alt:"",class:"",height:"100px",width:"200px"},null,8,Ts)])])])):r("",!0),Ps,o.value.uploadedVideo?(l(),i("div",Qs,[s("video",{src:o.value.uploadedVideo,controls:"",height:"360",width:"auto"}," Your browser does not support the video tag. ",8,Es)])):r("",!0),o.value.uploadedVideo?r("",!0):(l(),i("div",Fs,[b(A,{modelValue:o.value.video,"onUpdate:modelValue":d[1]||(d[1]=e=>o.value.video=e),accept:"video/*",clearable:"",dense:"",label:"Прикрепить",outlined:""},{default:w(()=>[b(E,{class:"cursor-pointer",color:"grey",name:"attach_file",size:"1.2rem"})]),_:1},8,["modelValue"])]))])])):r("",!0),s("div",As,[o.value.video?(l(),i("div",Ds,[b(C,{color:"green",onClick:N},{default:w(()=>[_("Сохранить видео")]),_:1})])):r("",!0)]),o.value.status?(l(),i("div",Ls,[Us,s("div",Js,[s("div",Os," Cтатус: "+c(o.value.status),1)])])):r("",!0)])):r("",!0),v.value?(l(),i("div",Rs,[s("div",Ys,[s("h5",Gs,c(v.value),1)])])):r("",!0)])]))}};export{ie as default};
