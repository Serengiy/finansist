import{r as N,y as Q,o,p as n,a as i,w as p,F as d,q as u,t as c,l as r,c as C,n as j,a1 as B,b as w,P as _,N as h}from"./app-90bf6a79.js";import{a as R,Q as T}from"./QTable-ca0f14f3.js";import{Q as U}from"./QPagination-de6aaaf7.js";const O={key:0,class:"shadow-3"},E={key:3},F={class:"row bg-white justify-center q-pb-md rounded-borders"},I={key:1,class:"row q-mt-sm bg-white justify-center q-pb-md rounded-borders shadow-3"},A={__name:"OperationTable",props:{operations:Array,pagination:Object},emits:["update:pagination","refresh"],setup(e,{emit:k}){const P=e,x=N([{name:"sber_amountRub",label:"Сумма",field:"sber_amountRub",align:"left"},{name:"categories",label:"Категория",field:"categories",align:"left"},{name:"is_manual",label:"is manual",field:"is_manual",align:"left"},{name:"actions",label:"Действия",align:"left"},{name:"date_at",label:"Дата",field:"date_at",align:"left"},{name:"sber_paymentPurpose",label:"Назначение",field:"sber_paymentPurpose",align:"left"}]),v=k,V=l=>{v("update:pagination",{...P.pagination,page:l})},q=async l=>{var t;_.show();try{const s=await axios.put(`/api/operations/${l.id}`,{is_manual:l.is_manual});(t=s==null?void 0:s.data)!=null&&t.success&&h.create({message:"Обновлено",color:"green",timeout:2e3})}catch{h.create({message:"Ошибка обновления",color:"red",timeout:2e3})}_.hide()};return(l,t)=>{const s=Q("router-link");return e.operations.length?(o(),n("div",O,[i(T,{flat:"",class:"q-mt-md q-px-sm",rows:e.operations,pagination:{rowsPerPage:e.pagination.rowsPerPage},columns:x.value,"row-key":"id","hide-bottom":""},{"body-cell":p(a=>[i(R,{item:a},{default:p(()=>{var g,b,y,f;return[a.col.name==="sber_amountRub"?(o(),n(d,{key:0},[u(c((g=a.row)==null?void 0:g.sber_amountRub),1)],64)):r("",!0),a.col.name==="categories"?(o(),n(d,{key:1},[u(c((b=a.row)==null?void 0:b.categories.map(m=>m.name).join(", ")),1)],64)):r("",!0),a.col.name==="is_manual"?(o(),C(j,{key:2,"onUpdate:modelValue":[m=>a.row.is_manual=m,m=>q(a.row)],"model-value":a.row.is_manual},null,8,["onUpdate:modelValue","model-value"])):r("",!0),a.col.name==="actions"?(o(),n("div",E,[i(s,{to:{name:"OperationEdit",params:{id:a.row.id}},class:"cursor-pointer"},{default:p(()=>[i(B,{color:"primary",size:"xs",name:"edit",class:"cursor-pointer"})]),_:2},1032,["to"])])):r("",!0),a.col.name==="date_at"?(o(),n(d,{key:4},[u(c((y=a.row)==null?void 0:y.date_at),1)],64)):r("",!0),a.col.name==="sber_paymentPurpose"?(o(),n(d,{key:5},[u(c((f=a.row)==null?void 0:f.sber_paymentPurpose),1)],64)):r("",!0)]}),_:2},1032,["item"])]),_:1},8,["rows","pagination","columns"]),w("div",F,[i(U,{modelValue:e.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=a=>e.pagination.page=a),V],max:Math.ceil(e.pagination.rowsNumber/e.pagination.rowsPerPage),"boundary-numbers":"","boundary-links":"","max-pages":10,class:"text-center q-mt-md"},null,8,["modelValue","max"])])])):(o(),n("div",I,t[1]||(t[1]=[w("p",{class:"text-h6"}," Для этого контрагента операции не найдены ",-1)])))}}};export{A as _};
