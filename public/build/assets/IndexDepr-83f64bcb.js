import{Q as u}from"./QPage-3662eeea.js";import{s as f,a as o}from"./index-5d5d1fa5.js";import{r as h,k as g,P as n,N as _,o as l,c as i,w as d,x as r,a as c,l as x}from"./app-90bf6a79.js";const v={__name:"IndexDepr",setup(w){const t=h([]);function s(e){return console.log(e),{key:e.id,data:{name:e.name,categoryType:e.category_type,totalAmount:e.total_amount,createdAt:e.created_at},children:e.children?e.children.map(a=>s(a)):[]}}g(()=>{m()});const m=async e=>{n.show({message:"Загрузка..."});try{const a=await axios.get("/api/categories");t.value=a.data.categories.map(p=>s(p))}catch{_.create({message:"fetching failed",color:"red"})}finally{n.hide()}};return(e,a)=>(l(),i(u,null,{default:d(()=>[t.value.length?(l(),i(r(f),{key:0,class:"custom-tree-table q-mt-md q-px-sm q-mb-xl",value:t.value,tableStyle:"min-width: 80rem; border-collapse: separate; border-spacing: 0 0.5rem"},{default:d(()=>[c(r(o),{field:"name",header:"Категория",expander:"",style:{width:"34%","font-weight":"bold"}}),c(r(o),{field:"totalAmount",header:"Сумма",style:{width:"33%","text-align":"right","padding-right":"1rem"}})]),_:1},8,["value"])):x("",!0)]),_:1}))}};export{v as default};
