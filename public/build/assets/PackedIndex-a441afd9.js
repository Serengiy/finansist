import{Q as U}from"./QSelect-fcdeceb1.js";import{x as q,y as D,z,r as f,L as F,B as K,C as O,o as l,n as o,a as r,w as c,k as R,F as s,d as k,q as t,b as T,f as y,D as x,i as V,v as n,t as b,c as j,I as E,P as h,J as L}from"./app-64dafc3a.js";import{Q as J}from"./QSpace-767f85f1.js";import{Q as W,a as $}from"./QTable-9f10ca35.js";import{Q}from"./QPagination-9c29fd07.js";import{I as A}from"./InfoDialong-683d1c5a.js";import"./QChip-18101fab.js";import"./position-engine-f936ecea.js";import"./use-dialog-plugin-component-00e1baf8.js";import"./_plugin-vue_export-helper-c27b6911.js";const G={key:4,class:"text-center"},H=["onClick"],M={class:""},X={class:"flex flex-center"},Y={class:"flex flex-center"},ie={__name:"PackedIndex",setup(Z){q();const C=D();z("user");const _=f(),d=f({});f();const w=f(0),u=f(0),P=f({}),m=async p=>{h.show();try{const a=await axios.get("/api/orders/packed",{params:{...d.value,page:p}}),{data:i,meta:v}=a.data;_.value=i,u.value=v.current_page,w.value=v.last_page}catch(a){console.error(a)}h.hide()};F(()=>{C.name==="PackedOrderIndex"&&m()}),K(u,p=>{m(p)});const I={rowsNumber:50},B=()=>{d.value={...P.value},u.value=1,m()},N=async p=>{try{const i=(await axios.get("https://dyatlovait.ru/api/users/"+p)).data;L.create({component:A,componentProps:{title:"Ответственный за сборку:",info:i==null?void 0:i.fi}})}catch(a){console.log(a)}},S=[{label:"Маркетплейс",name:"marketplace",field:"marketplace",sortable:!1,align:"left"},{label:"Статус",name:"status",field:"status",sortable:!1,align:"left"},{label:"Номер заказа",name:"order_id",field:"order_id",sortable:!1,align:"left"},{label:"Номер резерва",name:"reserve_id",field:"reserve_id",sortable:!1,align:"left"},{label:"Ответственный за сборку",name:"responsible",field:"responsible",sortable:!1,align:"left"},{label:"Компоненты",name:"components",field:"components",sortable:!1,align:"left"},{label:"Дата заказа",name:"order_date",field:"order_date",sortable:!1,align:"left"}];return(p,a)=>{var v;const i=O("router-link");return l(),o(s,null,[r(R,null,{default:c(()=>[r(T,{class:"row q-gutter-sm justify-between items-start"},{default:c(()=>[r(U,{class:"col-1",modelValue:d.value.mp,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value.mp=e),options:[{mp:"wb",name:"Wildberries"},{mp:"ozon",name:"Ozon"}],"option-label":"name","option-value":"mp",label:"Маркетплей",clearable:"",dense:"","emit-value":"",outlined:"","use-chips":""},null,8,["modelValue"]),r(y,{class:"col-1",modelValue:d.value.order_id,"onUpdate:modelValue":a[1]||(a[1]=e=>d.value.order_id=e),clearable:"",dense:"","hide-details":"",label:"Номер заказа",outlined:"",onKeypress:x(m,["enter"])},null,8,["modelValue"]),r(y,{class:"col-1",modelValue:d.value.reserve_id,"onUpdate:modelValue":a[2]||(a[2]=e=>d.value.reserve_id=e),clearable:"",dense:"","hide-details":"",label:"Номер резерва",outlined:"",onKeypress:x(m,["enter"])},null,8,["modelValue"]),r(J),r(V,{color:"green",outlined:"",onClick:m},{default:c(()=>[n("Искать")]),_:1}),r(V,{color:"red",outlined:"",onClick:B},{default:c(()=>[n("Сбросить")]),_:1})]),_:1})]),_:1}),(v=_.value)!=null&&v.length?(l(),o(s,{key:0},[r(W,{columns:S,pagination:I,rows:_.value,dense:"","hide-bottom":"","row-key":"id",title:"Заказы","virtual-scroll":"","wrap-cells":""},{"body-cell":c(e=>[r($,null,{default:c(()=>[e.col.name=="marketplace"?(l(),o(s,{key:0},[n(b(e.row.marketplace),1)],64)):t("",!0),e.col.name=="status"?(l(),o(s,{key:1},[e.row.status==="confirmed"||e.row.status==="packed"?(l(),o(s,{key:0},[n(" Собран ")],64)):t("",!0),e.row.status==="new"?(l(),o(s,{key:1},[n(" Новый ")],64)):t("",!0),e.row.status==="processing"?(l(),o(s,{key:2},[n(" В процессе сборки ")],64)):t("",!0),e.row.status==="delivering"?(l(),o(s,{key:3},[n(" Доставляется ")],64)):t("",!0),e.row.status==="cancelled"?(l(),o(s,{key:4},[n(" Отменен ")],64)):t("",!0),e.row.status==="completed"?(l(),o(s,{key:5},[n(" Отправлен ")],64)):t("",!0)],64)):e.col.name=="order_id"?(l(),j(i,{key:2,to:{name:"PackedOrderShow",params:{orderId:e.row.order_id}}},{default:c(()=>[n(b(e.row.order_id),1)]),_:2},1032,["to"])):t("",!0),e.col.name=="reserve_id"?(l(),o(s,{key:3},[n(b(e.row.reserve_id),1)],64)):t("",!0),e.col.name=="responsible"?(l(),o("div",G,[k("a",{href:"#",onClick:g=>N(e.row.responsible)},b(e.row.responsible),9,H)])):t("",!0),e.col.name=="components"?(l(!0),o(s,{key:5},E(e.row.components,g=>(l(),o("div",null,[k("span",M,b(g.label),1)]))),256)):t("",!0),e.col.name=="order_date"?(l(),o(s,{key:6},[n(b(e.row.order_date),1)],64)):t("",!0)]),_:2},1024)]),_:1},8,["rows"]),k("div",X,[r(Q,{modelValue:u.value,"onUpdate:modelValue":a[3]||(a[3]=e=>u.value=e),max:w.value,"max-pages":6,"boundary-links":"","boundary-numbers":"",class:"q-mt-md","direction-links":""},null,8,["modelValue","max"])]),k("div",Y,[r(Q,{modelValue:u.value,"onUpdate:modelValue":a[4]||(a[4]=e=>u.value=e),"boundary-links":!1,"direction-links":!1,max:w.value,"max-pages":6,class:"q-mt-md",input:""},null,8,["modelValue","max"])])],64)):t("",!0)],64)}}};export{ie as default};
