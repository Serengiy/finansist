import{r as _,o as u,c as v,w as r,u as f,Q as oe,a as l,b as S,d as e,t as b,s as Z,f as C,i as p,h as te,j as ae,k as se,p as ne,l as ie,B as pe,v as ee,n as w,q as d}from"./app-64dafc3a.js";import{Q as ue}from"./QSpace-767f85f1.js";import{Q as re}from"./QForm-db958e76.js";import{C as ce}from"./ClosePopup-9fac0edc.js";import{u as q}from"./use-dialog-plugin-component-00e1baf8.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";import{Q as le}from"./QSelect-fcdeceb1.js";const Q=i=>(ne("data-v-60e9dcb2"),i=i(),ie(),i),_e={class:"row text-grey-14"},me={class:"col"},ve=Q(()=>e("p",null,"Розничная цена",-1)),fe={class:"col"},ge=Q(()=>e("p",null,"Цена для мп",-1)),be={class:"row"},ke={class:"col"},Ve=Q(()=>e("strong",null,"Цена для Wildberries",-1)),he={class:"q-mt-md"},$e={class:"row"},ye={class:"col"},De=Q(()=>e("strong",null,"Цена для ОЗОН",-1)),xe={class:"q-mt-md"},we={__name:"PriceDialog",props:["price"],emits:[...q.emits],setup(i){const c=i,y=_(c.price.price_retail),k=_(c.price.price_marketplace),n=_(c.price.price_wb),s=_(c.price.price_ozon),{dialogRef:V,onDialogHide:m,onDialogOK:D,onDialogCancel:P}=q(),g=(x,t)=>{D({default:{marketplace:x,price:t}})};function I(){D({id:c.price.id,price_wb:n.value,price_ozon:s.value})}return(x,t)=>(u(),v(oe,{ref_key:"dialogRef",ref:V,onHide:f(m)},{default:r(()=>[l(se,{class:"dialog q-pa-lg"},{default:r(()=>[l(re,{onSubmit:I},{default:r(()=>[l(S,{class:"q-gutter-md"},{default:r(()=>[e("div",_e,[e("div",me,[ve,e("p",null,b(y.value),1)]),e("div",fe,[ge,e("p",null,b(k.value),1)])]),l(Z,{size:"3px"}),e("div",null,[e("div",be,[e("div",ke,[Ve,l(C,{mask:"#","fill-mask":"0","reverse-fill-mask":"",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o)},null,8,["modelValue"])])]),e("div",he,[l(p,{color:"orange",size:"sm",onClick:t[1]||(t[1]=o=>g("price_wb","price_retail")),label:"Сбросить до розничной",unelevated:""}),l(p,{color:"orange",size:"sm",class:"q-ml-md",onClick:t[2]||(t[2]=o=>g("price_wb","price_marketplace")),label:"Сбросить до цены мп",unelevated:""})])]),e("div",null,[e("div",$e,[e("div",ye,[De,l(C,{mask:"#","fill-mask":"0","reverse-fill-mask":"",modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=o=>s.value=o)},null,8,["modelValue"])])]),e("div",xe,[l(p,{color:"orange",size:"sm",onClick:t[4]||(t[4]=o=>g("price_ozon","price_retail")),label:"Сбросить до розничной",unelevated:""}),l(p,{color:"orange",size:"sm",class:"q-ml-md",onClick:t[5]||(t[5]=o=>g("price_ozon","price_marketplace")),label:"Сбросить до цены мп",unelevated:""})])])]),_:1}),l(Z,{inset:""}),l(S),l(te,{align:"right"},{default:r(()=>[l(ue),l(p,{color:"green",label:"OK",type:"submit",unelevated:""}),ae(l(p,{color:"red",label:"Отмена",unelevated:""},null,512),[[ce]])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Je=de(we,[["__scopeId","data-v-60e9dcb2"]]);const z=i=>(ne("data-v-8c33a5ff"),i=i(),ie(),i),Ce=z(()=>e("h5",{class:"text-center"},"Добавление продукта в брак",-1)),Qe={class:"text-left"},ze=z(()=>e("strong",null,"Артикул:",-1)),Se={class:"text-left"},qe=z(()=>e("strong",null,"Название:",-1)),Pe={key:0,class:"text-left"},Ie={class:"row"},Be={class:"col"},He={class:""},Ke={key:1,class:"text-red q-mt-sm"},Oe={key:4,class:"text-blue"},Ue={key:5,class:"text-red"},Ne=z(()=>e("br",null,null,-1)),Re={__name:"DefectivePropDialog",props:["product","props","prop"],setup(i){const c=i,y=c.product,k=c.props,n=_(c.prop),s=_(null),V=_(null),m=_(null);pe(n,(t,o)=>{s.value=null});const{dialogRef:D,onDialogHide:P,onDialogOK:g,onDialogCancel:I}=q();function x(){var t,o,h,$;g({barcode:(o=(t=n.value)==null?void 0:t.prop)==null?void 0:o.barcode,shop:($=(h=s.value)==null?void 0:h.value)==null?void 0:$.shop_id,amount:m.value,comment:V.value})}return(t,o)=>(u(),v(oe,{ref_key:"dialogRef",ref:D,onHide:f(P)},{default:r(()=>[l(se,{class:"dialog q-pa-lg"},{default:r(()=>{var h,$,B,H;return[Ce,e("p",Qe,[ze,ee(" "+b(f(y).code),1)]),e("p",Se,[qe,ee(" "+b(f(y).name),1)]),f(k)?d("",!0):(u(),w("p",Pe,"Характеристика товара: "+b(`${($=(h=n.value)==null?void 0:h.prop)==null?void 0:$.color} ${(H=(B=n.value)==null?void 0:B.prop)==null?void 0:H.size}`),1)),l(re,{onSubmit:x},{default:r(()=>[l(S,{class:"q-gutter-md"},{default:r(()=>{var K,O,U,N,R,j,A,E,F,T,W,G,J,L,M,X;return[e("div",Ie,[e("div",Be,[e("div",He,[f(k)?(u(),v(le,{key:0,modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a),options:f(k).map(a=>({label:`${a==null?void 0:a.color} ${a==null?void 0:a.size}`,prop:a})),"option-value":"id",label:"Продукт"},null,8,["modelValue","options"])):d("",!0),n.value&&!((O=(K=n.value)==null?void 0:K.prop)!=null&&O.amounts.length)?(u(),w("p",Ke," Такого товара нет в наличии ни в одном магазине ")):d("",!0),((N=(U=n.value)==null?void 0:U.prop)==null?void 0:N.amounts.length)>0?(u(),v(le,{key:2,options:(j=(R=n.value)==null?void 0:R.prop)==null?void 0:j.amounts.map(a=>{var Y;return{label:(Y=a.shop)==null?void 0:Y.name,value:a}}),modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=a=>s.value=a),"option-value":"id",label:"Магазин"},null,8,["options","modelValue"])):d("",!0),((E=(A=s.value)==null?void 0:A.value)==null?void 0:E.amount)>0?(u(),v(C,{key:3,modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=a=>m.value=a),label:"Количество брака",type:"number",max:((F=s.value.value)==null?void 0:F.amount)-((T=s.value.value)==null?void 0:T.defective),min:"0"},null,8,["modelValue","max"])):d("",!0),(G=(W=s.value)==null?void 0:W.value)!=null&&G.amount?(u(),w("p",Oe," Всего доступного товара в этом магазине: "+b(((J=s.value.value)==null?void 0:J.amount)-((L=s.value.value)==null?void 0:L.defective)),1)):d("",!0),((X=(M=s.value)==null?void 0:M.value)==null?void 0:X.amount)===0?(u(),w("p",Ue," в этом магазине не осталось этого товара ")):d("",!0),m.value>0?(u(),v(C,{key:6,rows:2,type:"textarea",label:"comment",modelValue:V.value,"onUpdate:modelValue":o[3]||(o[3]=a=>V.value=a)},null,8,["modelValue"])):d("",!0)])])]),Ne]}),_:1}),l(te,{align:"right"},{default:r(()=>[l(ue),n.value&&s.value&&m.value?(u(),v(p,{key:0,color:"green",label:"OK",type:"submit",unelevated:""})):d("",!0),ae(l(p,{color:"red",label:"Отмена",unelevated:""},null,512),[[ce]])]),_:1})]),_:1})]}),_:1})]),_:1},8,["onHide"]))}},Le=de(Re,[["__scopeId","data-v-8c33a5ff"]]);export{Le as D,Je as P};
