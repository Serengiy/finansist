var Ue=Object.defineProperty;var Ae=(s,a,e)=>a in s?Ue(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var u=(s,a,e)=>(Ae(s,typeof a!="symbol"?a+"":a,e),e);import{u as Ge,i as Xe,r as b,j as $e,k as Ze,o as je,c as Ke,w as D,l as Je,P as Te,m as ee,N as te,a as m,g as Se,e as $,d as L,n as ie,f as re,p as et,b as B,q as tt,t as Ye}from"./app-5118b733.js";import{d as de,Q as ce}from"./QDate-5560aa43.js";import{Q as me,a as ae}from"./QSelect-cbbdaa50.js";import{Q as rt}from"./QForm-76dbe431.js";import{Q as at}from"./QPage-344fc20c.js";import{_ as st}from"./OperationTable-ba26ad88.js";import{t as O,g as be,c as F,m as nt,a as ot,b as lt,d as ut,s as fe,e as Pe,f as it,h as dt,i as Ve,j as ct,l as qe,k as mt,w as Oe,n as ft,o as U}from"./format-04e7afb3.js";import{a as _e,s as wt,b as yt}from"./startOfQuarter-72f9bb24.js";import"./QTable-f9990858.js";import"./QPagination-963531c0.js";function pt(s,a){const e=O(s,a==null?void 0:a.in),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function bt(s,a){const e=O(s,a==null?void 0:a.in);return e.setDate(1),e.setHours(0,0,0,0),e}function xt(s,a){var p,k,M,T;const e=be(),t=(a==null?void 0:a.weekStartsOn)??((k=(p=a==null?void 0:a.locale)==null?void 0:p.options)==null?void 0:k.weekStartsOn)??e.weekStartsOn??((T=(M=e.locale)==null?void 0:M.options)==null?void 0:T.weekStartsOn)??0,r=O(s,a==null?void 0:a.in),n=r.getDay(),i=(n<t?-7:0)+6-(n-t);return r.setDate(r.getDate()+i),r.setHours(23,59,59,999),r}function ht(s,a){const e=O(s,a==null?void 0:a.in),t=e.getMonth(),r=t-t%3+3;return e.setMonth(r,0),e.setHours(23,59,59,999),e}function vt(){return Object.assign({},be())}function gt(s,a){const e=O(s,a==null?void 0:a.in).getDay();return e===0?7:e}function Dt(s,a){const e=kt(a)?new a(0):F(a,0);return e.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),e.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e}function kt(s){var a;return typeof s=="function"&&((a=s.prototype)==null?void 0:a.constructor)===s}const Mt=10;class Ie{constructor(){u(this,"subPriority",0)}validate(a,e){return!0}}class Tt extends Ie{constructor(a,e,t,r,n){super(),this.value=a,this.validateValue=e,this.setValue=t,this.priority=r,n&&(this.subPriority=n)}validate(a,e){return this.validateValue(a,this.value,e)}set(a,e,t){return this.setValue(a,e,this.value,t)}}class Yt extends Ie{constructor(e,t){super();u(this,"priority",Mt);u(this,"subPriority",-1);this.context=e||(r=>F(t,r))}set(e,t){return t.timestampIsSet?e:F(e,Dt(e,this.context))}}class w{run(a,e,t,r){const n=this.parse(a,e,t,r);return n?{setter:new Tt(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(a,e,t){return!0}}class qt extends w{constructor(){super(...arguments);u(this,"priority",140);u(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}const v={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},I={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function g(s,a){return s&&{value:a(s.value),rest:s.rest}}function x(s,a){const e=a.match(s);return e?{value:parseInt(e[0],10),rest:a.slice(e[0].length)}:null}function E(s,a){const e=a.match(s);if(!e)return null;if(e[0]==="Z")return{value:0,rest:a.slice(1)};const t=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,n=e[3]?parseInt(e[3],10):0,i=e[5]?parseInt(e[5],10):0;return{value:t*(r*nt+n*ot+i*lt),rest:a.slice(e[0].length)}}function Ee(s){return x(v.anyDigitsSigned,s)}function h(s,a){switch(s){case 1:return x(v.singleDigit,a);case 2:return x(v.twoDigits,a);case 3:return x(v.threeDigits,a);case 4:return x(v.fourDigits,a);default:return x(new RegExp("^\\d{1,"+s+"}"),a)}}function we(s,a){switch(s){case 1:return x(v.singleDigitSigned,a);case 2:return x(v.twoDigitsSigned,a);case 3:return x(v.threeDigitsSigned,a);case 4:return x(v.fourDigitsSigned,a);default:return x(new RegExp("^-?\\d{1,"+s+"}"),a)}}function xe(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function He(s,a){const e=a>0,t=e?a:1-a;let r;if(t<=50)r=s||100;else{const n=t+50,i=Math.trunc(n/100)*100,p=s>=n%100;r=s+i-(p?100:0)}return e?r:1-r}function Qe(s){return s%400===0||s%4===0&&s%100!==0}class Ot extends w{constructor(){super(...arguments);u(this,"priority",130);u(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,r){const n=i=>({year:i,isTwoDigitYear:t==="yy"});switch(t){case"y":return g(h(4,e),n);case"yo":return g(r.ordinalNumber(e,{unit:"year"}),n);default:return g(h(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const n=e.getFullYear();if(r.isTwoDigitYear){const p=He(r.year,n);return e.setFullYear(p,0,1),e.setHours(0,0,0,0),e}const i=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class Pt extends w{constructor(){super(...arguments);u(this,"priority",130);u(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,r){const n=i=>({year:i,isTwoDigitYear:t==="YY"});switch(t){case"Y":return g(h(4,e),n);case"Yo":return g(r.ordinalNumber(e,{unit:"year"}),n);default:return g(h(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){const i=ut(e,n);if(r.isTwoDigitYear){const k=He(r.year,i);return e.setFullYear(k,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),fe(e,n)}const p=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(p,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),fe(e,n)}}class Vt extends w{constructor(){super(...arguments);u(this,"priority",130);u(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return we(t==="R"?4:t.length,e)}set(e,t,r){const n=F(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Pe(n)}}class _t extends w{constructor(){super(...arguments);u(this,"priority",130);u(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return we(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}class It extends w{constructor(){super(...arguments);u(this,"priority",120);u(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"Q":case"QQ":return h(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class Et extends w{constructor(){super(...arguments);u(this,"priority",120);u(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"q":case"qq":return h(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class Ht extends w{constructor(){super(...arguments);u(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);u(this,"priority",110)}parse(e,t,r){const n=i=>i-1;switch(t){case"M":return g(x(v.month,e),n);case"MM":return g(h(2,e),n);case"Mo":return g(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Qt extends w{constructor(){super(...arguments);u(this,"priority",110);u(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,r){const n=i=>i-1;switch(t){case"L":return g(x(v.month,e),n);case"LL":return g(h(2,e),n);case"Lo":return g(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}function Ct(s,a,e){const t=O(s,e==null?void 0:e.in),r=it(t,e)-a;return t.setDate(t.getDate()-r*7),O(t,e==null?void 0:e.in)}class Nt extends w{constructor(){super(...arguments);u(this,"priority",100);u(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,r){switch(t){case"w":return x(v.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return h(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return fe(Ct(e,r,n),n)}}function Lt(s,a,e){const t=O(s,e==null?void 0:e.in),r=dt(t,e)-a;return t.setDate(t.getDate()-r*7),t}class Ft extends w{constructor(){super(...arguments);u(this,"priority",100);u(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,r){switch(t){case"I":return x(v.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return h(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return Pe(Lt(e,r))}}const zt=[31,28,31,30,31,30,31,31,30,31,30,31],Rt=[31,29,31,30,31,30,31,31,30,31,30,31];class Wt extends w{constructor(){super(...arguments);u(this,"priority",90);u(this,"subPriority",1);u(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"d":return x(v.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return h(t.length,e)}}validate(e,t){const r=e.getFullYear(),n=Qe(r),i=e.getMonth();return n?t>=1&&t<=Rt[i]:t>=1&&t<=zt[i]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}}class Bt extends w{constructor(){super(...arguments);u(this,"priority",90);u(this,"subpriority",1);u(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,r){switch(t){case"D":case"DD":return x(v.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return h(t.length,e)}}validate(e,t){const r=e.getFullYear();return Qe(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}}function he(s,a,e){var H,P,Q,q;const t=be(),r=(e==null?void 0:e.weekStartsOn)??((P=(H=e==null?void 0:e.locale)==null?void 0:H.options)==null?void 0:P.weekStartsOn)??t.weekStartsOn??((q=(Q=t.locale)==null?void 0:Q.options)==null?void 0:q.weekStartsOn)??0,n=O(s,e==null?void 0:e.in),i=n.getDay(),k=(a%7+7)%7,M=7-r,T=a<0||a>6?a-(i+M)%7:(k+M)%7-(i+M)%7;return _e(n,T,e)}class Ut extends w{constructor(){super(...arguments);u(this,"priority",90);u(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=he(e,r,n),e.setHours(0,0,0,0),e}}class At extends w{constructor(){super(...arguments);u(this,"priority",90);u(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,r,n){const i=p=>{const k=Math.floor((p-1)/7)*7;return(p+n.weekStartsOn+6)%7+k};switch(t){case"e":case"ee":return g(h(t.length,e),i);case"eo":return g(r.ordinalNumber(e,{unit:"day"}),i);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=he(e,r,n),e.setHours(0,0,0,0),e}}class Gt extends w{constructor(){super(...arguments);u(this,"priority",90);u(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,r,n){const i=p=>{const k=Math.floor((p-1)/7)*7;return(p+n.weekStartsOn+6)%7+k};switch(t){case"c":case"cc":return g(h(t.length,e),i);case"co":return g(r.ordinalNumber(e,{unit:"day"}),i);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=he(e,r,n),e.setHours(0,0,0,0),e}}function Xt(s,a,e){const t=O(s,e==null?void 0:e.in),r=gt(t,e),n=a-r;return _e(t,n,e)}class $t extends w{constructor(){super(...arguments);u(this,"priority",90);u(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,r){const n=i=>i===0?7:i;switch(t){case"i":case"ii":return h(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return g(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return g(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return g(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiii":default:return g(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=Xt(e,r),e.setHours(0,0,0,0),e}}class Zt extends w{constructor(){super(...arguments);u(this,"priority",80);u(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(xe(r),0,0,0),e}}class jt extends w{constructor(){super(...arguments);u(this,"priority",80);u(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(xe(r),0,0,0),e}}class Kt extends w{constructor(){super(...arguments);u(this,"priority",80);u(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(xe(r),0,0,0),e}}class Jt extends w{constructor(){super(...arguments);u(this,"priority",70);u(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,r){switch(t){case"h":return x(v.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return h(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):!n&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}}class St extends w{constructor(){super(...arguments);u(this,"priority",70);u(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,r){switch(t){case"H":return x(v.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return h(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}}class er extends w{constructor(){super(...arguments);u(this,"priority",70);u(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,r){switch(t){case"K":return x(v.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return h(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}}class tr extends w{constructor(){super(...arguments);u(this,"priority",70);u(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,r){switch(t){case"k":return x(v.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return h(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}}class rr extends w{constructor(){super(...arguments);u(this,"priority",60);u(this,"incompatibleTokens",["t","T"])}parse(e,t,r){switch(t){case"m":return x(v.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return h(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}}class ar extends w{constructor(){super(...arguments);u(this,"priority",50);u(this,"incompatibleTokens",["t","T"])}parse(e,t,r){switch(t){case"s":return x(v.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return h(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}}class sr extends w{constructor(){super(...arguments);u(this,"priority",30);u(this,"incompatibleTokens",["t","T"])}parse(e,t){const r=n=>Math.trunc(n*Math.pow(10,-t.length+3));return g(h(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}}class nr extends w{constructor(){super(...arguments);u(this,"priority",10);u(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return E(I.basicOptionalMinutes,e);case"XX":return E(I.basic,e);case"XXXX":return E(I.basicOptionalSeconds,e);case"XXXXX":return E(I.extendedOptionalSeconds,e);case"XXX":default:return E(I.extended,e)}}set(e,t,r){return t.timestampIsSet?e:F(e,e.getTime()-Ve(e)-r)}}class or extends w{constructor(){super(...arguments);u(this,"priority",10);u(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return E(I.basicOptionalMinutes,e);case"xx":return E(I.basic,e);case"xxxx":return E(I.basicOptionalSeconds,e);case"xxxxx":return E(I.extendedOptionalSeconds,e);case"xxx":default:return E(I.extended,e)}}set(e,t,r){return t.timestampIsSet?e:F(e,e.getTime()-Ve(e)-r)}}class lr extends w{constructor(){super(...arguments);u(this,"priority",40);u(this,"incompatibleTokens","*")}parse(e){return Ee(e)}set(e,t,r){return[F(e,r*1e3),{timestampIsSet:!0}]}}class ur extends w{constructor(){super(...arguments);u(this,"priority",20);u(this,"incompatibleTokens","*")}parse(e){return Ee(e)}set(e,t,r){return[F(e,r),{timestampIsSet:!0}]}}const ir={G:new qt,y:new Ot,Y:new Pt,R:new Vt,u:new _t,Q:new It,q:new Et,M:new Ht,L:new Qt,w:new Nt,I:new Ft,d:new Wt,D:new Bt,E:new Ut,e:new At,c:new Gt,i:new $t,a:new Zt,b:new jt,B:new Kt,h:new Jt,H:new St,K:new er,k:new tr,m:new rr,s:new ar,S:new sr,X:new nr,x:new or,t:new lr,T:new ur},dr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mr=/^'([^]*?)'?$/,fr=/''/g,wr=/\S/,yr=/[a-zA-Z]/;function pe(s,a,e,t){var A,G,R,Z,j,V,f,X;const r=()=>F((t==null?void 0:t.in)||e,NaN),n=vt(),i=(t==null?void 0:t.locale)??n.locale??ct,p=(t==null?void 0:t.firstWeekContainsDate)??((G=(A=t==null?void 0:t.locale)==null?void 0:A.options)==null?void 0:G.firstWeekContainsDate)??n.firstWeekContainsDate??((Z=(R=n.locale)==null?void 0:R.options)==null?void 0:Z.firstWeekContainsDate)??1,k=(t==null?void 0:t.weekStartsOn)??((V=(j=t==null?void 0:t.locale)==null?void 0:j.options)==null?void 0:V.weekStartsOn)??n.weekStartsOn??((X=(f=n.locale)==null?void 0:f.options)==null?void 0:X.weekStartsOn)??0;if(!a)return s?r():O(e,t==null?void 0:t.in);const M={firstWeekContainsDate:p,weekStartsOn:k,locale:i},T=[new Yt(t==null?void 0:t.in,e)],H=a.match(cr).map(c=>{const y=c[0];if(y in qe){const Y=qe[y];return Y(c,i.formatLong)}return c}).join("").match(dr),P=[];for(let c of H){!(t!=null&&t.useAdditionalWeekYearTokens)&&mt(c)&&Oe(c,a,s),!(t!=null&&t.useAdditionalDayOfYearTokens)&&ft(c)&&Oe(c,a,s);const y=c[0],Y=ir[y];if(Y){const{incompatibleTokens:W}=Y;if(Array.isArray(W)){const se=P.find(ne=>W.includes(ne.token)||ne.token===y);if(se)throw new RangeError(`The format string mustn't contain \`${se.fullToken}\` and \`${c}\` at the same time`)}else if(Y.incompatibleTokens==="*"&&P.length>0)throw new RangeError(`The format string mustn't contain \`${c}\` and any other token at the same time`);P.push({token:y,fullToken:c});const C=Y.run(s,c,i.match,M);if(!C)return r();T.push(C.setter),s=C.rest}else{if(y.match(yr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if(c==="''"?c="'":y==="'"&&(c=pr(c)),s.indexOf(c)===0)s=s.slice(c.length);else return r()}}if(s.length>0&&wr.test(s))return r();const Q=T.map(c=>c.priority).sort((c,y)=>y-c).filter((c,y,Y)=>Y.indexOf(c)===y).map(c=>T.filter(y=>y.priority===c).sort((y,Y)=>Y.subPriority-y.subPriority)).map(c=>c[0]);let q=O(e,t==null?void 0:t.in);if(isNaN(+q))return r();const z={};for(const c of Q){if(!c.validate(q,M))return r();const y=c.set(q,z,M);Array.isArray(y)?(q=y[0],Object.assign(z,y[1])):q=y}return q}function pr(s){return s.match(mr)[1].replace(fr,"'")}const br={class:"row"},xr={class:"row justify-between items-center q-mt-md"},hr={class:"row justify-between full-width"},vr={class:"text-body2 q-px-sm q-py-xs text-primary rounded-borders primary-borders"},gr={class:"row justify-end q-mt-md"},Dr={class:"q-mt-md q-ml-md"},Hr={__name:"Index",setup(s){const a=Ge(),e=Xe(),t=b([]),r=b(null),n=a.query,i=b([]),p=b([]),k=b([]),M=b([]),T=b(!1),H=b(!1),P=b(null),Q=b(null),q=b(!1),z=b(!1),A=b(""),G=b("");b([]),b([]);const R=b([]),Z=b(0),j=b(0),V=b({page:1,rowsPerPage:50,rowsNumber:0}),f=b({dateFrom:"",dateTo:"",splitFilter:null,categoryQuery:"",parentCategoryId:null,categories:[],pizzerias:[],purpose_expression:"",sberDirection:null,without_category:0}),X=b(""),c=b(""),y=b(!1),Y=b(!1),W=d=>{f.value.dateFrom=d,X.value=de.formatDate(d,"DD.MM.YYYY"),y.value=!1},C=d=>{f.value.dateTo=d,c.value=de.formatDate(d,"DD.MM.YYYY"),Y.value=!1},se=d=>{P.value=d,A.value=de.formatDate(d,"DD.MM.YYYY"),q.value=!1},ne=d=>{Q.value=d,G.value=de.formatDate(d,"DD.MM.YYYY"),z.value=!1};$e(f,()=>{V.value.page=1},{deep:!0});const oe=async d=>{var o,l,K,_,le,ue,J,ge,De,ke,Me;Te.show();try{const N=await ee.get("/api/operations/",{params:{...f.value,isSplit:(o=f.value.splitFilter)==null?void 0:o.value,page:V.value.page,contractorIds:M.value,categoryIds:((l=f.value.categories)==null?void 0:l.map(S=>S.id))??null,pizzeriaIds:((_=(K=f.value)==null?void 0:K.pizzerias)==null?void 0:_.map(S=>S.id))||[r.value]}});i.value=(le=N==null?void 0:N.data)==null?void 0:le.data,Z.value=i.value.reduce((S,ye)=>S+(ye==null?void 0:ye.sber_amountRub),0),j.value=N.data.meta.total,V.value.rowsNumber=(J=(ue=N.data)==null?void 0:ue.meta)==null?void 0:J.total,V.value.page=(De=(ge=N.data)==null?void 0:ge.meta)==null?void 0:De.current_page,V.value.totalPages=(Me=(ke=N.data)==null?void 0:ke.meta)==null?void 0:Me.last_page}catch(N){console.log(N),te.create({message:"Ошибка получения данных",color:"red",timeout:2e3})}Te.hide()},Ce=async()=>{try{te.create({message:"Синхронизация запущена!"}),H.value=!1;const d=await ee.get("/api/get-operations",{params:{start_at:P.value,end_at:Q.value}});te.create({message:"Синхронизация закончена!"})}catch{te.create({message:"Ошибка! Синхронизация транзакций не удалась!",color:"error"})}},Ne=async(d,o,l)=>{d.length>3?(T.value=!0,await Le(d),o(()=>R.value),T.value=!1):(R.value=[],o(()=>R.value))},Le=async(d="")=>{try{const o=await ee.get("/api/categories",{params:{q:d||""}});R.value=o.data.data}catch{te.create({message:"Ошибка получения данных",color:"red",timeout:2e3})}},Fe=async(d,o,l)=>{d.length>3?(T.value=!0,await ve(d),o(()=>p.value)):(p.value=[],o(()=>p.value))},ve=async d=>{T.value=!0;try{const o=await ee.get("/api/contractors",{params:{q:d||"",ids:M.value}});p.value=o.data.data,k.value=p.value.map(l=>({...l,value:l.id,label:l.name})),M.value=p.value.map(l=>l.id)}catch{}finally{T.value=!1}},ze=async()=>{try{const d=await ee.get("/api/pizzerias");t.value=d.data.data}catch{}},Re=()=>{JSON.parse(JSON.stringify(f.value)),oe()};Ze(async()=>{await ze(),await We(n),M.value.length&&await ve(),r.value.length&&(f.value.pizzerias=t.value.filter(d=>r.value.includes(String(d.id)))),await oe()});const We=async d=>{if(M.value=d.contractorIds||[],f.value.parentCategoryId=d.parentCategoryId||null,r.value=d.pizzeriaIds||[],d!=null&&d.groupBy&&(d!=null&&d.date)){const{groupBy:o,date:l}=d;switch(o){case"monthly":{const _=pe(l,"MM-yyyy",new Date);W(U(bt(_),"yyyy-MM-dd")),C(U(pt(_),"yyyy-MM-dd"));break}case"weekly":{const[_,le]=l.split("-").map(Number),ue=new Date(le,0,1),J=yt(ue,_-1);W(U(fe(J,{weekStartsOn:1}),"yyyy-MM-dd")),C(U(xt(J,{weekStartsOn:1}),"yyyy-MM-dd"));break}case"quarterly":{const _=pe(l,"Q-yyyy",new Date);W(U(wt(_),"yyyy-MM-dd")),C(U(ht(_),"yyyy-MM-dd"));break}default:const K=pe(l,"d-MM-yyyy",new Date);W(U(K,"yyyy-MM-dd")),C(U(K,"yyyy-MM-dd"))}}},Be=async()=>{await e.push({path:a.path,query:{}})};return(d,o)=>i.value?(je(),Ke(at,{key:0},{default:D(()=>[m(et,{modelValue:H.value,"onUpdate:modelValue":o[10]||(o[10]=l=>H.value=l)},{default:D(()=>[m(Se,{style:{"min-width":"300px"}},{default:D(()=>[m($,{class:"col-2 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",modelValue:A.value,"onUpdate:modelValue":o[3]||(o[3]=l=>A.value=l),label:"Дата начала",readonly:"",onClick:o[4]||(o[4]=L(l=>q.value=!0,["stop"]))},{append:D(()=>[m(ie,{name:"event",onClick:o[0]||(o[0]=L(l=>q.value=!0,["stop"]))})]),default:D(()=>[m(me,{modelValue:q.value,"onUpdate:modelValue":o[2]||(o[2]=l=>q.value=l),anchor:"bottom left",self:"top left"},{default:D(()=>[m(ce,{modelValue:P.value,"onUpdate:modelValue":[o[1]||(o[1]=l=>P.value=l),se],mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),m($,{class:"col-2 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",modelValue:G.value,"onUpdate:modelValue":o[8]||(o[8]=l=>G.value=l),label:"Дата конца",readonly:"",onClick:o[9]||(o[9]=L(l=>z.value=!0,["stop"]))},{append:D(()=>[m(ie,{name:"event",onClick:o[5]||(o[5]=L(l=>z.value=!0,["stop"]))})]),default:D(()=>[m(me,{modelValue:z.value,"onUpdate:modelValue":o[7]||(o[7]=l=>z.value=l),anchor:"bottom left",self:"top left"},{default:D(()=>[m(ce,{modelValue:Q.value,"onUpdate:modelValue":[o[6]||(o[6]=l=>Q.value=l),ne],mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),m(re,{onClick:Ce,label:"Сохранить",color:"primary",class:"q-mt-md full-width"})]),_:1})]),_:1},8,["modelValue"]),m(rt,{onSubmit:L(Re,["prevent"]),class:"items-center q-pa-md bg-grey-4"},{default:D(()=>[B("div",br,[m($,{class:"col-3 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",type:"number",modelValue:f.value.sum,"onUpdate:modelValue":o[11]||(o[11]=l=>f.value.sum=l),label:"Сумма"},null,8,["modelValue"]),m($,{class:"col-2 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",modelValue:X.value,"onUpdate:modelValue":o[15]||(o[15]=l=>X.value=l),label:"Дата начала",readonly:"",onClick:o[16]||(o[16]=L(l=>y.value=!0,["stop"]))},{append:D(()=>[m(ie,{name:"event",onClick:o[12]||(o[12]=L(l=>y.value=!0,["stop"]))})]),default:D(()=>[m(me,{modelValue:y.value,"onUpdate:modelValue":o[14]||(o[14]=l=>y.value=l),anchor:"bottom left",self:"top left"},{default:D(()=>[m(ce,{modelValue:f.value.dateFrom,"onUpdate:modelValue":[o[13]||(o[13]=l=>f.value.dateFrom=l),W],mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),m($,{class:"col-2 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",modelValue:c.value,"onUpdate:modelValue":o[20]||(o[20]=l=>c.value=l),label:"Дата окончания",readonly:"",onClick:o[21]||(o[21]=L(l=>Y.value=!0,["stop"]))},{append:D(()=>[m(ie,{name:"event",onClick:o[17]||(o[17]=L(l=>Y.value=!0,["stop"]))})]),default:D(()=>[m(me,{modelValue:Y.value,"onUpdate:modelValue":o[19]||(o[19]=l=>Y.value=l),anchor:"bottom left",self:"top left"},{default:D(()=>[m(ce,{modelValue:f.value.dateFrom,"onUpdate:modelValue":[o[18]||(o[18]=l=>f.value.dateFrom=l),C],mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),m(ae,{class:"col-3 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",flat:"",label:"Категория",modelValue:f.value.categories,"onUpdate:modelValue":o[23]||(o[23]=l=>f.value.categories=l),options:R.value,"option-label":"name",clearable:"",multiple:"","use-input":"",borderless:"","use-chips":"",onFilter:Ne,loading:T.value},{after:D(()=>[m(tt,{modelValue:f.value.without_category,"onUpdate:modelValue":o[22]||(o[22]=l=>f.value.without_category=l),class:"checkbox-small-label",dense:"",label:"Без контрагента","true-value":1,"false-value":0},null,8,["modelValue"])]),_:1},8,["modelValue","options","loading"]),m(ae,{class:"col-3 q-px-sm q-mt-sm",dense:"",outlined:"",filled:"",label:"Пиццерия",modelValue:f.value.pizzerias,"onUpdate:modelValue":o[24]||(o[24]=l=>f.value.pizzerias=l),options:t.value,clearable:"","option-label":"name","option-value":"id",multiple:""},null,8,["modelValue","options"]),m($,{class:"col-3 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:f.value.purpose_expression,"onUpdate:modelValue":o[25]||(o[25]=l=>f.value.purpose_expression=l),label:"Регулярное выражение"},null,8,["modelValue"]),m(ae,{class:"col-3 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:f.value.sberDirection,"onUpdate:modelValue":o[26]||(o[26]=l=>f.value.sberDirection=l),label:"Тип операции",options:[{label:"DEBIT",value:"DEBIT"},{label:"CREDIT",value:"CREDIT"}]},null,8,["modelValue"]),m(ae,{class:"col-6 q-mt-sm",dense:"",outlined:"",filled:"",label:"Контрагенты (получатели)",modelValue:k.value,"onUpdate:modelValue":o[27]||(o[27]=l=>k.value=l),options:p.value,"use-input":"",multiple:"",clearable:"","option-label":"name",onFilter:Fe,loading:T.value},null,8,["modelValue","options","loading"]),m(ae,{class:"col-3 q-px-sm q-mt-sm",clearable:"",dense:"",outlined:"",filled:"",modelValue:f.value.splitFilter,"onUpdate:modelValue":o[28]||(o[28]=l=>f.value.splitFilter=l),label:"Разделенные операции",options:[{label:"Все",value:null},{label:"Разделенные",value:!0},{label:"Неразделенные",value:!1}]},null,8,["modelValue"])]),B("div",xr,[B("div",hr,[B("div",null,[m(re,{onClick:o[29]||(o[29]=l=>H.value=!0),label:"Синхронизировать транзакции",dense:"",size:"sm",color:"primary",class:"q-mr-sm q-pa-xs"}),m(re,{to:"/operations/create",class:"text-right q-pa-xs",dense:"",size:"sm",label:"Создать операцию",color:"primary"})]),B("div",null,[B("p",vr,"Итого: "+Ye(Z.value.toFixed(2)),1)])])]),B("div",gr,[m(re,{class:"text-right q-pa-xs",dense:"",size:"sm",type:"submit",label:"Применить фильтры",color:"green"}),m(re,{class:"text-right q-ml-sm q-pa-xs",dense:"",size:"sm",onClick:Be,label:"Очистить фильтры",color:"red"})])]),_:1}),B("div",Dr,"Всего: "+Ye(j.value),1),m(st,{operations:i.value,pagination:V.value,"onUpdate:pagination":o[30]||(o[30]=l=>{V.value=l,oe()}),onRefresh:oe},null,8,["operations","pagination"])]),_:1})):Je("",!0)}};export{Hr as default};
